var ss=Object.defineProperty;var Cn=e=>{throw TypeError(e)};var is=(e,t,r)=>t in e?ss(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ge=(e,t,r)=>is(e,typeof t!="symbol"?t+"":t,r),Nr=(e,t,r)=>t.has(e)||Cn("Cannot "+r);var g=(e,t,r)=>(Nr(e,t,"read from private field"),r?r.call(e):t.get(e)),W=(e,t,r)=>t.has(e)?Cn("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),H=(e,t,r,n)=>(Nr(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),oe=(e,t,r)=>(Nr(e,t,"access private method"),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();const Or=!1;var Qr=Array.isArray,ls=Array.prototype.indexOf,Vt=Array.prototype.includes,xr=Array.from,os=Object.defineProperty,Ot=Object.getOwnPropertyDescriptor,us=Object.getOwnPropertyDescriptors,vs=Object.prototype,cs=Array.prototype,Vn=Object.getPrototypeOf,Tn=Object.isExtensible;const fs=()=>{};function ds(e){for(var t=0;t<e.length;t++)e[t]()}function Wn(){var e,t,r=new Promise((n,s)=>{e=n,t=s});return{promise:r,resolve:e,reject:t}}function _s(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const r=[];for(const n of e)if(r.push(n),r.length===t)break;return r}const fe=2,ur=4,Sr=8,Yn=1<<24,at=16,Ue=32,Mt=64,Dr=128,Pe=512,ue=1024,de=2048,qe=4096,Se=8192,tt=16384,It=32768,Pt=65536,Rn=1<<17,Jn=1<<18,Zt=1<<19,hs=1<<20,et=1<<25,At=65536,Fr=1<<21,$r=1<<22,ct=1<<23,Dt=Symbol("$state"),gs=Symbol("legacy props"),pt=new class extends Error{constructor(){super(...arguments);Ge(this,"name","StaleReactionError");Ge(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function ps(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function ms(e,t,r){throw new Error("https://svelte.dev/e/each_key_duplicate")}function bs(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ws(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ys(e){throw new Error("https://svelte.dev/e/effect_orphan")}function ks(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function xs(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ss(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Es(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Cs(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ts(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Rs=1,Is=2,Zn=4,Ps=8,As=16,zs=1,Ns=4,Ms=8,Ls=16,js=1,Os=2,ve=Symbol(),Xn="http://www.w3.org/1999/xhtml";function Ds(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Fs(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Qn(e){return e===this.v}function Bs(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function $n(e){return!Bs(e,this.v)}let qs=!1,ze=null;function Wt(e){ze=e}function ie(e,t=!1,r){ze={p:ze,i:!1,c:null,e:null,s:e,x:null,l:null}}function le(e){var t=ze,r=t.e;if(r!==null){t.e=null;for(var n of r)ba(n)}return t.i=!0,ze=t.p,{}}function ea(){return!0}let mt=[];function ta(){var e=mt;mt=[],ds(e)}function Ct(e){if(mt.length===0&&!tr){var t=mt;queueMicrotask(()=>{t===mt&&ta()})}mt.push(e)}function Us(){for(;mt.length>0;)ta()}function ra(e){var t=Q;if(t===null)return V.f|=ct,e;if((t.f&It)===0&&(t.f&ur)===0)throw e;vt(e,t)}function vt(e,t){for(;t!==null;){if((t.f&Dr)!==0){if((t.f&It)===0)throw e;try{t.b.error(e);return}catch(r){e=r}}t=t.parent}throw e}const Gs=-7169;function ae(e,t){e.f=e.f&Gs|t}function en(e){(e.f&Pe)!==0||e.deps===null?ae(e,ue):ae(e,qe)}function na(e){if(e!==null)for(const t of e)(t.f&fe)===0||(t.f&At)===0||(t.f^=At,na(t.deps))}function aa(e,t,r){(e.f&de)!==0?t.add(e):(e.f&qe)!==0&&r.add(e),na(e.deps),ae(e,ue)}const fr=new Set;let B=null,mr=null,ce=null,ge=[],Er=null,Br=!1,tr=!1;var Ft,Bt,yt,qt,sr,ir,kt,Xe,Ut,Ce,qr,Ur,Gr,sa;const vn=class vn{constructor(){W(this,Ce);Ge(this,"current",new Map);Ge(this,"previous",new Map);W(this,Ft,new Set);W(this,Bt,new Set);W(this,yt,0);W(this,qt,0);W(this,sr,null);W(this,ir,new Set);W(this,kt,new Set);W(this,Xe,new Map);Ge(this,"is_fork",!1);W(this,Ut,!1)}skip_effect(t){g(this,Xe).has(t)||g(this,Xe).set(t,{d:[],m:[]})}unskip_effect(t){var r=g(this,Xe).get(t);if(r){g(this,Xe).delete(t);for(var n of r.d)ae(n,de),De(n);for(n of r.m)ae(n,qe),De(n)}}process(t){var s;ge=[],this.apply();var r=[],n=[];for(const a of t)oe(this,Ce,Ur).call(this,a,r,n);if(oe(this,Ce,qr).call(this)){oe(this,Ce,Gr).call(this,n),oe(this,Ce,Gr).call(this,r);for(const[a,o]of g(this,Xe))ua(a,o)}else{for(const a of g(this,Ft))a();g(this,Ft).clear(),g(this,yt)===0&&oe(this,Ce,sa).call(this),mr=this,B=null,In(n),In(r),mr=null,(s=g(this,sr))==null||s.resolve()}ce=null}capture(t,r){r!==ve&&!this.previous.has(t)&&this.previous.set(t,r),(t.f&ct)===0&&(this.current.set(t,t.v),ce==null||ce.set(t,t.v))}activate(){B=this,this.apply()}deactivate(){B===this&&(B=null,ce=null)}flush(){if(this.activate(),ge.length>0){if(ia(),B!==null&&B!==this)return}else g(this,yt)===0&&this.process([]);this.deactivate()}discard(){for(const t of g(this,Bt))t(this);g(this,Bt).clear()}increment(t){H(this,yt,g(this,yt)+1),t&&H(this,qt,g(this,qt)+1)}decrement(t){H(this,yt,g(this,yt)-1),t&&H(this,qt,g(this,qt)-1),!g(this,Ut)&&(H(this,Ut,!0),Ct(()=>{H(this,Ut,!1),oe(this,Ce,qr).call(this)?ge.length>0&&this.flush():this.revive()}))}revive(){for(const t of g(this,ir))g(this,kt).delete(t),ae(t,de),De(t);for(const t of g(this,kt))ae(t,qe),De(t);this.flush()}oncommit(t){g(this,Ft).add(t)}ondiscard(t){g(this,Bt).add(t)}settled(){return(g(this,sr)??H(this,sr,Wn())).promise}static ensure(){if(B===null){const t=B=new vn;fr.add(B),tr||Ct(()=>{B===t&&t.flush()})}return B}apply(){}};Ft=new WeakMap,Bt=new WeakMap,yt=new WeakMap,qt=new WeakMap,sr=new WeakMap,ir=new WeakMap,kt=new WeakMap,Xe=new WeakMap,Ut=new WeakMap,Ce=new WeakSet,qr=function(){return this.is_fork||g(this,qt)>0},Ur=function(t,r,n){t.f^=ue;for(var s=t.first;s!==null;){var a=s.f,o=(a&(Ue|Mt))!==0,u=o&&(a&ue)!==0,l=u||(a&Se)!==0||g(this,Xe).has(s);if(!l&&s.fn!==null){o?s.f^=ue:(a&ur)!==0?r.push(s):cr(s)&&((a&at)!==0&&g(this,kt).add(s),Jt(s));var v=s.first;if(v!==null){s=v;continue}}for(;s!==null;){var c=s.next;if(c!==null){s=c;break}s=s.parent}}},Gr=function(t){for(var r=0;r<t.length;r+=1)aa(t[r],g(this,ir),g(this,kt))},sa=function(){var s;if(fr.size>1){this.previous.clear();var t=ce,r=!0;for(const a of fr){if(a===this){r=!1;continue}const o=[];for(const[l,v]of this.current){if(a.current.has(l))if(r&&v!==a.current.get(l))a.current.set(l,v);else continue;o.push(l)}if(o.length===0)continue;const u=[...a.current.keys()].filter(l=>!this.current.has(l));if(u.length>0){var n=ge;ge=[];const l=new Set,v=new Map;for(const c of o)la(c,u,l,v);if(ge.length>0){B=a,a.apply();for(const c of ge)oe(s=a,Ce,Ur).call(s,c,[],[]);a.deactivate()}ge=n}}B=null,ce=t}fr.delete(this)};let ft=vn;function Hs(e){var t=tr;tr=!0;try{for(var r;;){if(Us(),ge.length===0&&(B==null||B.flush(),ge.length===0))return Er=null,r;ia()}}finally{tr=t}}function ia(){Br=!0;var e=null;try{for(var t=0;ge.length>0;){var r=ft.ensure();if(t++>1e3){var n,s;Ks()}r.process(ge),dt.clear()}}finally{ge=[],Br=!1,Er=null}}function Ks(){try{ks()}catch(e){vt(e,Er)}}let Le=null;function In(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var n=e[r++];if((n.f&(tt|Se))===0&&cr(n)&&(Le=new Set,Jt(n),n.deps===null&&n.first===null&&n.nodes===null&&n.teardown===null&&n.ac===null&&ya(n),(Le==null?void 0:Le.size)>0)){dt.clear();for(const s of Le){if((s.f&(tt|Se))!==0)continue;const a=[s];let o=s.parent;for(;o!==null;)Le.has(o)&&(Le.delete(o),a.push(o)),o=o.parent;for(let u=a.length-1;u>=0;u--){const l=a[u];(l.f&(tt|Se))===0&&Jt(l)}}Le.clear()}}Le=null}}function la(e,t,r,n){if(!r.has(e)&&(r.add(e),e.reactions!==null))for(const s of e.reactions){const a=s.f;(a&fe)!==0?la(s,t,r,n):(a&($r|at))!==0&&(a&de)===0&&oa(s,t,n)&&(ae(s,de),De(s))}}function oa(e,t,r){const n=r.get(e);if(n!==void 0)return n;if(e.deps!==null)for(const s of e.deps){if(Vt.call(t,s))return!0;if((s.f&fe)!==0&&oa(s,t,r))return r.set(s,!0),!0}return r.set(e,!1),!1}function De(e){var t=Er=e,r=t.b;if(r!=null&&r.is_pending&&(e.f&(ur|Sr|Yn))!==0&&(e.f&It)===0){r.defer_effect(e);return}for(;t.parent!==null;){t=t.parent;var n=t.f;if(Br&&t===Q&&(n&at)!==0&&(n&Jn)===0&&(n&It)!==0)return;if((n&(Mt|Ue))!==0){if((n&ue)===0)return;t.f^=ue}}ge.push(t)}function ua(e,t){if(!((e.f&Ue)!==0&&(e.f&ue)!==0)){(e.f&de)!==0?t.d.push(e):(e.f&qe)!==0&&t.m.push(e),ae(e,ue);for(var r=e.first;r!==null;)ua(r,t),r=r.next}}function Vs(e){let t=0,r=zt(0),n;return()=>{an()&&(i(r),Tr(()=>(t===0&&(n=Ir(()=>e(()=>rr(r)))),t+=1,()=>{Ct(()=>{t-=1,t===0&&(n==null||n(),n=void 0,rr(r))})})))}}var Ws=Pt|Zt;function Ys(e,t,r,n){new Js(e,t,r,n)}var Re,Xr,He,xt,he,Ke,ye,je,Qe,St,ut,Gt,Ht,Kt,$e,yr,se,Zs,Xs,Qs,Hr,hr,gr,Kr;class Js{constructor(t,r,n,s){W(this,se);Ge(this,"parent");Ge(this,"is_pending",!1);Ge(this,"transform_error");W(this,Re);W(this,Xr,null);W(this,He);W(this,xt);W(this,he);W(this,Ke,null);W(this,ye,null);W(this,je,null);W(this,Qe,null);W(this,St,0);W(this,ut,0);W(this,Gt,!1);W(this,Ht,new Set);W(this,Kt,new Set);W(this,$e,null);W(this,yr,Vs(()=>(H(this,$e,zt(g(this,St))),()=>{H(this,$e,null)})));var a;H(this,Re,t),H(this,He,r),H(this,xt,o=>{var u=Q;u.b=this,u.f|=Dr,n(o)}),this.parent=Q.b,this.transform_error=s??((a=this.parent)==null?void 0:a.transform_error)??(o=>o),H(this,he,Rr(()=>{oe(this,se,Hr).call(this)},Ws))}defer_effect(t){aa(t,g(this,Ht),g(this,Kt))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!g(this,He).pending}update_pending_count(t){oe(this,se,Kr).call(this,t),H(this,St,g(this,St)+t),!(!g(this,$e)||g(this,Gt))&&(H(this,Gt,!0),Ct(()=>{H(this,Gt,!1),g(this,$e)&&Yt(g(this,$e),g(this,St))}))}get_effect_pending(){return g(this,yr).call(this),i(g(this,$e))}error(t){var r=g(this,He).onerror;let n=g(this,He).failed;if(!r&&!n)throw t;g(this,Ke)&&(me(g(this,Ke)),H(this,Ke,null)),g(this,ye)&&(me(g(this,ye)),H(this,ye,null)),g(this,je)&&(me(g(this,je)),H(this,je,null));var s=!1,a=!1;const o=()=>{if(s){Fs();return}s=!0,a&&Ts(),g(this,je)!==null&&Tt(g(this,je),()=>{H(this,je,null)}),oe(this,se,gr).call(this,()=>{ft.ensure(),oe(this,se,Hr).call(this)})},u=l=>{try{a=!0,r==null||r(l,o),a=!1}catch(v){vt(v,g(this,he)&&g(this,he).parent)}n&&H(this,je,oe(this,se,gr).call(this,()=>{ft.ensure();try{return Ie(()=>{var v=Q;v.b=this,v.f|=Dr,n(g(this,Re),()=>l,()=>o)})}catch(v){return vt(v,g(this,he).parent),null}}))};Ct(()=>{var l;try{l=this.transform_error(t)}catch(v){vt(v,g(this,he)&&g(this,he).parent);return}l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(u,v=>vt(v,g(this,he)&&g(this,he).parent)):u(l)})}}Re=new WeakMap,Xr=new WeakMap,He=new WeakMap,xt=new WeakMap,he=new WeakMap,Ke=new WeakMap,ye=new WeakMap,je=new WeakMap,Qe=new WeakMap,St=new WeakMap,ut=new WeakMap,Gt=new WeakMap,Ht=new WeakMap,Kt=new WeakMap,$e=new WeakMap,yr=new WeakMap,se=new WeakSet,Zs=function(){try{H(this,Ke,Ie(()=>g(this,xt).call(this,g(this,Re))))}catch(t){this.error(t)}},Xs=function(t){const r=g(this,He).failed;r&&H(this,je,Ie(()=>{r(g(this,Re),()=>t,()=>()=>{})}))},Qs=function(){const t=g(this,He).pending;t&&(this.is_pending=!0,H(this,ye,Ie(()=>t(g(this,Re)))),Ct(()=>{var r=H(this,Qe,document.createDocumentFragment()),n=rt();r.append(n),H(this,Ke,oe(this,se,gr).call(this,()=>(ft.ensure(),Ie(()=>g(this,xt).call(this,n))))),g(this,ut)===0&&(g(this,Re).before(r),H(this,Qe,null),Tt(g(this,ye),()=>{H(this,ye,null)}),oe(this,se,hr).call(this))}))},Hr=function(){try{if(this.is_pending=this.has_pending_snippet(),H(this,ut,0),H(this,St,0),H(this,Ke,Ie(()=>{g(this,xt).call(this,g(this,Re))})),g(this,ut)>0){var t=H(this,Qe,document.createDocumentFragment());Sa(g(this,Ke),t);const r=g(this,He).pending;H(this,ye,Ie(()=>r(g(this,Re))))}else oe(this,se,hr).call(this)}catch(r){this.error(r)}},hr=function(){this.is_pending=!1;for(const t of g(this,Ht))ae(t,de),De(t);for(const t of g(this,Kt))ae(t,qe),De(t);g(this,Ht).clear(),g(this,Kt).clear()},gr=function(t){var r=Q,n=V,s=ze;Ye(g(this,he)),Ne(g(this,he)),Wt(g(this,he).ctx);try{return t()}catch(a){return ra(a),null}finally{Ye(r),Ne(n),Wt(s)}},Kr=function(t){var r;if(!this.has_pending_snippet()){this.parent&&oe(r=this.parent,se,Kr).call(r,t);return}H(this,ut,g(this,ut)+t),g(this,ut)===0&&(oe(this,se,hr).call(this),g(this,ye)&&Tt(g(this,ye),()=>{H(this,ye,null)}),g(this,Qe)&&(g(this,Re).before(g(this,Qe)),H(this,Qe,null)))};function $s(e,t,r,n){const s=Cr;var a=e.filter(d=>!d.settled);if(r.length===0&&a.length===0){n(t.map(s));return}var o=Q,u=ei(),l=a.length===1?a[0].promise:a.length>1?Promise.all(a.map(d=>d.promise)):null;function v(d){u();try{n(d)}catch(k){(o.f&tt)===0&&vt(k,o)}Vr()}if(r.length===0){l.then(()=>v(t.map(s)));return}function c(){u(),Promise.all(r.map(d=>ri(d))).then(d=>v([...t.map(s),...d])).catch(d=>vt(d,o))}l?l.then(c):c()}function ei(){var e=Q,t=V,r=ze,n=B;return function(a=!0){Ye(e),Ne(t),Wt(r),a&&(n==null||n.activate())}}function Vr(e=!0){Ye(null),Ne(null),Wt(null),e&&(B==null||B.deactivate())}function ti(){var e=Q.b,t=B,r=e.is_rendered();return e.update_pending_count(1),t.increment(r),()=>{e.update_pending_count(-1),t.decrement(r)}}function Cr(e){var t=fe|de,r=V!==null&&(V.f&fe)!==0?V:null;return Q!==null&&(Q.f|=Zt),{ctx:ze,deps:null,effects:null,equals:Qn,f:t,fn:e,reactions:null,rv:0,v:ve,wv:0,parent:r??Q,ac:null}}function ri(e,t,r){Q===null&&ps();var s=void 0,a=zt(ve),o=!V,u=new Map;return pi(()=>{var k;var l=Wn();s=l.promise;try{Promise.resolve(e()).then(l.resolve,l.reject).finally(Vr)}catch(p){l.reject(p),Vr()}var v=B;if(o){var c=ti();(k=u.get(v))==null||k.reject(pt),u.delete(v),u.set(v,l)}const d=(p,b=void 0)=>{if(v.activate(),b)b!==pt&&(a.f|=ct,Yt(a,b));else{(a.f&ct)!==0&&(a.f^=ct),Yt(a,p);for(const[x,h]of u){if(u.delete(x),x===v)break;h.reject(pt)}}c&&c()};l.promise.then(d,p=>d(null,p||"unknown"))}),sn(()=>{for(const l of u.values())l.reject(pt)}),new Promise(l=>{function v(c){function d(){c===s?l(a):v(s)}c.then(d,d)}v(s)})}function M(e){const t=Cr(e);return Ea(t),t}function va(e){const t=Cr(e);return t.equals=$n,t}function ni(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)me(t[r])}}function ai(e){for(var t=e.parent;t!==null;){if((t.f&fe)===0)return(t.f&tt)===0?t:null;t=t.parent}return null}function tn(e){var t,r=Q;Ye(ai(e));try{e.f&=~At,ni(e),t=Ia(e)}finally{Ye(r)}return t}function ca(e){var t=tn(e);if(!e.equals(t)&&(e.wv=Ta(),(!(B!=null&&B.is_fork)||e.deps===null)&&(e.v=t,e.deps===null))){ae(e,ue);return}_t||(ce!==null?(an()||B!=null&&B.is_fork)&&ce.set(e,t):en(e))}function si(e){var t,r;if(e.effects!==null)for(const n of e.effects)(n.teardown||n.ac)&&((t=n.teardown)==null||t.call(n),(r=n.ac)==null||r.abort(pt),n.teardown=fs,n.ac=null,ar(n,0),ln(n))}function fa(e){if(e.effects!==null)for(const t of e.effects)t.teardown&&Jt(t)}let Wr=new Set;const dt=new Map;let da=!1;function zt(e,t){var r={f:0,v:e,reactions:null,equals:Qn,rv:0,wv:0};return r}function G(e,t){const r=zt(e);return Ea(r),r}function ii(e,t=!1,r=!0){const n=zt(e);return t||(n.equals=$n),n}function P(e,t,r=!1){V!==null&&(!Fe||(V.f&Rn)!==0)&&ea()&&(V.f&(fe|at|$r|Rn))!==0&&(Ae===null||!Vt.call(Ae,e))&&Cs();let n=r?We(t):t;return Yt(e,n)}function Yt(e,t){if(!e.equals(t)){var r=e.v;_t?dt.set(e,t):dt.set(e,r),e.v=t;var n=ft.ensure();if(n.capture(e,r),(e.f&fe)!==0){const s=e;(e.f&de)!==0&&tn(s),en(s)}e.wv=Ta(),_a(e,de),Q!==null&&(Q.f&ue)!==0&&(Q.f&(Ue|Mt))===0&&(Te===null?wi([e]):Te.push(e)),!n.is_fork&&Wr.size>0&&!da&&li()}return t}function li(){da=!1;for(const e of Wr)(e.f&ue)!==0&&ae(e,qe),cr(e)&&Jt(e);Wr.clear()}function rr(e){P(e,e.v+1)}function _a(e,t){var r=e.reactions;if(r!==null)for(var n=r.length,s=0;s<n;s++){var a=r[s],o=a.f,u=(o&de)===0;if(u&&ae(a,t),(o&fe)!==0){var l=a;ce==null||ce.delete(l),(o&At)===0&&(o&Pe&&(a.f|=At),_a(l,qe))}else u&&((o&at)!==0&&Le!==null&&Le.add(a),De(a))}}function We(e){if(typeof e!="object"||e===null||Dt in e)return e;const t=Vn(e);if(t!==vs&&t!==cs)return e;var r=new Map,n=Qr(e),s=G(0),a=Rt,o=u=>{if(Rt===a)return u();var l=V,v=Rt;Ne(null),Mn(a);var c=u();return Ne(l),Mn(v),c};return n&&r.set("length",G(e.length)),new Proxy(e,{defineProperty(u,l,v){(!("value"in v)||v.configurable===!1||v.enumerable===!1||v.writable===!1)&&Ss();var c=r.get(l);return c===void 0?o(()=>{var d=G(v.value);return r.set(l,d),d}):P(c,v.value,!0),!0},deleteProperty(u,l){var v=r.get(l);if(v===void 0){if(l in u){const c=o(()=>G(ve));r.set(l,c),rr(s)}}else P(v,ve),rr(s);return!0},get(u,l,v){var p;if(l===Dt)return e;var c=r.get(l),d=l in u;if(c===void 0&&(!d||(p=Ot(u,l))!=null&&p.writable)&&(c=o(()=>{var b=We(d?u[l]:ve),x=G(b);return x}),r.set(l,c)),c!==void 0){var k=i(c);return k===ve?void 0:k}return Reflect.get(u,l,v)},getOwnPropertyDescriptor(u,l){var v=Reflect.getOwnPropertyDescriptor(u,l);if(v&&"value"in v){var c=r.get(l);c&&(v.value=i(c))}else if(v===void 0){var d=r.get(l),k=d==null?void 0:d.v;if(d!==void 0&&k!==ve)return{enumerable:!0,configurable:!0,value:k,writable:!0}}return v},has(u,l){var k;if(l===Dt)return!0;var v=r.get(l),c=v!==void 0&&v.v!==ve||Reflect.has(u,l);if(v!==void 0||Q!==null&&(!c||(k=Ot(u,l))!=null&&k.writable)){v===void 0&&(v=o(()=>{var p=c?We(u[l]):ve,b=G(p);return b}),r.set(l,v));var d=i(v);if(d===ve)return!1}return c},set(u,l,v,c){var y;var d=r.get(l),k=l in u;if(n&&l==="length")for(var p=v;p<d.v;p+=1){var b=r.get(p+"");b!==void 0?P(b,ve):p in u&&(b=o(()=>G(ve)),r.set(p+"",b))}if(d===void 0)(!k||(y=Ot(u,l))!=null&&y.writable)&&(d=o(()=>G(void 0)),P(d,We(v)),r.set(l,d));else{k=d.v!==ve;var x=o(()=>We(v));P(d,x)}var h=Reflect.getOwnPropertyDescriptor(u,l);if(h!=null&&h.set&&h.set.call(c,v),!k){if(n&&typeof l=="string"){var w=r.get("length"),_=Number(l);Number.isInteger(_)&&_>=w.v&&P(w,_+1)}rr(s)}return!0},ownKeys(u){i(s);var l=Reflect.ownKeys(u).filter(d=>{var k=r.get(d);return k===void 0||k.v!==ve});for(var[v,c]of r)c.v!==ve&&!(v in u)&&l.push(v);return l},setPrototypeOf(){Es()}})}function Pn(e){try{if(e!==null&&typeof e=="object"&&Dt in e)return e[Dt]}catch{}return e}function oi(e,t){return Object.is(Pn(e),Pn(t))}var An,ha,ga,pa;function ui(){if(An===void 0){An=window,ha=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;ga=Ot(t,"firstChild").get,pa=Ot(t,"nextSibling").get,Tn(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Tn(r)&&(r.__t=void 0)}}function rt(e=""){return document.createTextNode(e)}function br(e){return ga.call(e)}function vr(e){return pa.call(e)}function f(e,t){return br(e)}function xe(e,t=!1){{var r=br(e);return r instanceof Comment&&r.data===""?vr(r):r}}function m(e,t=1,r=!1){let n=e;for(;t--;)n=vr(n);return n}function vi(e){e.textContent=""}function ma(){return!1}function ci(e,t,r){return document.createElementNS(Xn,e,void 0)}let zn=!1;function fi(){zn||(zn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function rn(e){var t=V,r=Q;Ne(null),Ye(null);try{return e()}finally{Ne(t),Ye(r)}}function nn(e,t,r,n=r){e.addEventListener(t,()=>rn(r));const s=e.__on_r;s?e.__on_r=()=>{s(),n(!0)}:e.__on_r=()=>n(!0),fi()}function di(e){Q===null&&(V===null&&ys(),ws()),_t&&bs()}function _i(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function st(e,t,r){var n=Q;n!==null&&(n.f&Se)!==0&&(e|=Se);var s={ctx:ze,deps:null,nodes:null,f:e|de|Pe,first:null,fn:t,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{Jt(s)}catch(u){throw me(s),u}else t!==null&&De(s);var a=s;if(r&&a.deps===null&&a.teardown===null&&a.nodes===null&&a.first===a.last&&(a.f&Zt)===0&&(a=a.first,(e&at)!==0&&(e&Pt)!==0&&a!==null&&(a.f|=Pt)),a!==null&&(a.parent=n,n!==null&&_i(a,n),V!==null&&(V.f&fe)!==0&&(e&Mt)===0)){var o=V;(o.effects??(o.effects=[])).push(a)}return s}function an(){return V!==null&&!Fe}function sn(e){const t=st(Sr,null,!1);return ae(t,ue),t.teardown=e,t}function Nt(e){di();var t=Q.f,r=!V&&(t&Ue)!==0&&(t&It)===0;if(r){var n=ze;(n.e??(n.e=[])).push(e)}else return ba(e)}function ba(e){return st(ur|hs,e,!1)}function hi(e){ft.ensure();const t=st(Mt|Zt,e,!0);return(r={})=>new Promise(n=>{r.outro?Tt(t,()=>{me(t),n(void 0)}):(me(t),n(void 0))})}function gi(e){return st(ur,e,!1)}function pi(e){return st($r|Zt,e,!0)}function Tr(e,t=0){return st(Sr|t,e,!0)}function D(e,t=[],r=[],n=[]){$s(n,t,r,s=>{st(Sr,()=>e(...s.map(i)),!0)})}function Rr(e,t=0){var r=st(at|t,e,!0);return r}function Ie(e){return st(Ue|Zt,e,!0)}function wa(e){var t=e.teardown;if(t!==null){const r=_t,n=V;Nn(!0),Ne(null);try{t.call(null)}finally{Nn(r),Ne(n)}}}function ln(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const s=r.ac;s!==null&&rn(()=>{s.abort(pt)});var n=r.next;(r.f&Mt)!==0?r.parent=null:me(r,t),r=n}}function mi(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&Ue)===0&&me(t),t=r}}function me(e,t=!0){var r=!1;(t||(e.f&Jn)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(bi(e.nodes.start,e.nodes.end),r=!0),ln(e,t&&!r),ar(e,0),ae(e,tt);var n=e.nodes&&e.nodes.t;if(n!==null)for(const a of n)a.stop();wa(e);var s=e.parent;s!==null&&s.first!==null&&ya(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function bi(e,t){for(;e!==null;){var r=e===t?null:vr(e);e.remove(),e=r}}function ya(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function Tt(e,t,r=!0){var n=[];ka(e,n,!0);var s=()=>{r&&me(e),t&&t()},a=n.length;if(a>0){var o=()=>--a||s();for(var u of n)u.out(o)}else s()}function ka(e,t,r){if((e.f&Se)===0){e.f^=Se;var n=e.nodes&&e.nodes.t;if(n!==null)for(const u of n)(u.is_global||r)&&t.push(u);for(var s=e.first;s!==null;){var a=s.next,o=(s.f&Pt)!==0||(s.f&Ue)!==0&&(e.f&at)!==0;ka(s,t,o?r:!1),s=a}}}function on(e){xa(e,!0)}function xa(e,t){if((e.f&Se)!==0){e.f^=Se,(e.f&ue)===0&&(ae(e,de),De(e));for(var r=e.first;r!==null;){var n=r.next,s=(r.f&Pt)!==0||(r.f&Ue)!==0;xa(r,s?t:!1),r=n}var a=e.nodes&&e.nodes.t;if(a!==null)for(const o of a)(o.is_global||t)&&o.in()}}function Sa(e,t){if(e.nodes)for(var r=e.nodes.start,n=e.nodes.end;r!==null;){var s=r===n?null:vr(r);t.append(r),r=s}}let pr=!1,_t=!1;function Nn(e){_t=e}let V=null,Fe=!1;function Ne(e){V=e}let Q=null;function Ye(e){Q=e}let Ae=null;function Ea(e){V!==null&&(Ae===null?Ae=[e]:Ae.push(e))}let pe=null,we=0,Te=null;function wi(e){Te=e}let Ca=1,bt=0,Rt=bt;function Mn(e){Rt=e}function Ta(){return++Ca}function cr(e){var t=e.f;if((t&de)!==0)return!0;if(t&fe&&(e.f&=~At),(t&qe)!==0){for(var r=e.deps,n=r.length,s=0;s<n;s++){var a=r[s];if(cr(a)&&ca(a),a.wv>e.wv)return!0}(t&Pe)!==0&&ce===null&&ae(e,ue)}return!1}function Ra(e,t,r=!0){var n=e.reactions;if(n!==null&&!(Ae!==null&&Vt.call(Ae,e)))for(var s=0;s<n.length;s++){var a=n[s];(a.f&fe)!==0?Ra(a,t,!1):t===a&&(r?ae(a,de):(a.f&ue)!==0&&ae(a,qe),De(a))}}function Ia(e){var x;var t=pe,r=we,n=Te,s=V,a=Ae,o=ze,u=Fe,l=Rt,v=e.f;pe=null,we=0,Te=null,V=(v&(Ue|Mt))===0?e:null,Ae=null,Wt(e.ctx),Fe=!1,Rt=++bt,e.ac!==null&&(rn(()=>{e.ac.abort(pt)}),e.ac=null);try{e.f|=Fr;var c=e.fn,d=c();e.f|=It;var k=e.deps,p=B==null?void 0:B.is_fork;if(pe!==null){var b;if(p||ar(e,we),k!==null&&we>0)for(k.length=we+pe.length,b=0;b<pe.length;b++)k[we+b]=pe[b];else e.deps=k=pe;if(an()&&(e.f&Pe)!==0)for(b=we;b<k.length;b++)((x=k[b]).reactions??(x.reactions=[])).push(e)}else!p&&k!==null&&we<k.length&&(ar(e,we),k.length=we);if(ea()&&Te!==null&&!Fe&&k!==null&&(e.f&(fe|qe|de))===0)for(b=0;b<Te.length;b++)Ra(Te[b],e);if(s!==null&&s!==e){if(bt++,s.deps!==null)for(let h=0;h<r;h+=1)s.deps[h].rv=bt;if(t!==null)for(const h of t)h.rv=bt;Te!==null&&(n===null?n=Te:n.push(...Te))}return(e.f&ct)!==0&&(e.f^=ct),d}catch(h){return ra(h)}finally{e.f^=Fr,pe=t,we=r,Te=n,V=s,Ae=a,Wt(o),Fe=u,Rt=l}}function yi(e,t){let r=t.reactions;if(r!==null){var n=ls.call(r,e);if(n!==-1){var s=r.length-1;s===0?r=t.reactions=null:(r[n]=r[s],r.pop())}}if(r===null&&(t.f&fe)!==0&&(pe===null||!Vt.call(pe,t))){var a=t;(a.f&Pe)!==0&&(a.f^=Pe,a.f&=~At),en(a),si(a),ar(a,0)}}function ar(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)yi(e,r[n])}function Jt(e){var t=e.f;if((t&tt)===0){ae(e,ue);var r=Q,n=pr;Q=e,pr=!0;try{(t&(at|Yn))!==0?mi(e):ln(e),wa(e);var s=Ia(e);e.teardown=typeof s=="function"?s:null,e.wv=Ca;var a;Or&&qs&&(e.f&de)!==0&&e.deps}finally{pr=n,Q=r}}}async function ki(){await Promise.resolve(),Hs()}function i(e){var t=e.f,r=(t&fe)!==0;if(V!==null&&!Fe){var n=Q!==null&&(Q.f&tt)!==0;if(!n&&(Ae===null||!Vt.call(Ae,e))){var s=V.deps;if((V.f&Fr)!==0)e.rv<bt&&(e.rv=bt,pe===null&&s!==null&&s[we]===e?we++:pe===null?pe=[e]:pe.push(e));else{(V.deps??(V.deps=[])).push(e);var a=e.reactions;a===null?e.reactions=[V]:Vt.call(a,V)||a.push(V)}}}if(_t&&dt.has(e))return dt.get(e);if(r){var o=e;if(_t){var u=o.v;return((o.f&ue)===0&&o.reactions!==null||Aa(o))&&(u=tn(o)),dt.set(o,u),u}var l=(o.f&Pe)===0&&!Fe&&V!==null&&(pr||(V.f&Pe)!==0),v=(o.f&It)===0;cr(o)&&(l&&(o.f|=Pe),ca(o)),l&&!v&&(fa(o),Pa(o))}if(ce!=null&&ce.has(e))return ce.get(e);if((e.f&ct)!==0)throw e.v;return e.v}function Pa(e){if(e.f|=Pe,e.deps!==null)for(const t of e.deps)(t.reactions??(t.reactions=[])).push(e),(t.f&fe)!==0&&(t.f&Pe)===0&&(fa(t),Pa(t))}function Aa(e){if(e.v===ve)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(dt.has(t)||(t.f&fe)!==0&&Aa(t))return!0;return!1}function Ir(e){var t=Fe;try{return Fe=!0,e()}finally{Fe=t}}const xi=["touchstart","touchmove"];function Si(e){return xi.includes(e)}const wt=Symbol("events"),za=new Set,Yr=new Set;function te(e,t,r){(t[wt]??(t[wt]={}))[e]=r}function it(e){for(var t=0;t<e.length;t++)za.add(e[t]);for(var r of Yr)r(e)}let Ln=null;function jn(e){var h,w;var t=this,r=t.ownerDocument,n=e.type,s=((h=e.composedPath)==null?void 0:h.call(e))||[],a=s[0]||e.target;Ln=e;var o=0,u=Ln===e&&e[wt];if(u){var l=s.indexOf(u);if(l!==-1&&(t===document||t===window)){e[wt]=t;return}var v=s.indexOf(t);if(v===-1)return;l<=v&&(o=l)}if(a=s[o]||e.target,a!==t){os(e,"currentTarget",{configurable:!0,get(){return a||r}});var c=V,d=Q;Ne(null),Ye(null);try{for(var k,p=[];a!==null;){var b=a.assignedSlot||a.parentNode||a.host||null;try{var x=(w=a[wt])==null?void 0:w[n];x!=null&&(!a.disabled||e.target===a)&&x.call(a,e)}catch(_){k?p.push(_):k=_}if(e.cancelBubble||b===t||b===null)break;a=b}if(k){for(let _ of p)queueMicrotask(()=>{throw _});throw k}}finally{e[wt]=t,delete e.currentTarget,Ne(c),Ye(d)}}}var Hn;const Mr=((Hn=globalThis==null?void 0:globalThis.window)==null?void 0:Hn.trustedTypes)&&globalThis.window.trustedTypes.createPolicy("svelte-trusted-html",{createHTML:e=>e});function Ei(e){return(Mr==null?void 0:Mr.createHTML(e))??e}function Ci(e){var t=ci("template");return t.innerHTML=Ei(e.replaceAll("<!>","<!---->")),t.content}function wr(e,t){var r=Q;r.nodes===null&&(r.nodes={start:e,end:t,a:null,t:null})}function C(e,t){var r=(t&js)!==0,n=(t&Os)!==0,s,a=!e.startsWith("<!>");return()=>{s===void 0&&(s=Ci(a?e:"<!>"+e),r||(s=br(s)));var o=n||ha?document.importNode(s,!0):s.cloneNode(!0);if(r){var u=br(o),l=o.lastChild;wr(u,l)}else wr(o,o);return o}}function On(e=""){{var t=rt(e+"");return wr(t,t),t}}function Jr(){var e=document.createDocumentFragment(),t=document.createComment(""),r=rt();return e.append(t,r),wr(t,r),e}function S(e,t){e!==null&&e.before(t)}function R(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r+"")}function Ti(e,t){return Ri(e,t)}const dr=new Map;function Ri(e,{target:t,anchor:r,props:n={},events:s,context:a,intro:o=!0,transformError:u}){ui();var l=void 0,v=hi(()=>{var c=r??t.appendChild(rt());Ys(c,{pending:()=>{}},p=>{ie({});var b=ze;a&&(b.c=a),s&&(n.$$events=s),l=e(p,n)||{},le()},u);var d=new Set,k=p=>{for(var b=0;b<p.length;b++){var x=p[b];if(!d.has(x)){d.add(x);var h=Si(x);for(const y of[t,document]){var w=dr.get(y);w===void 0&&(w=new Map,dr.set(y,w));var _=w.get(x);_===void 0?(y.addEventListener(x,jn,{passive:h}),w.set(x,1)):w.set(x,_+1)}}}};return k(xr(za)),Yr.add(k),()=>{var h;for(var p of d)for(const w of[t,document]){var b=dr.get(w),x=b.get(p);--x==0?(w.removeEventListener(p,jn),b.delete(p),b.size===0&&dr.delete(w)):b.set(p,x)}Yr.delete(k),c!==r&&((h=c.parentNode)==null||h.removeChild(c))}});return Ii.set(l,v),l}let Ii=new WeakMap;var Oe,Ve,ke,Et,lr,or,kr;class Na{constructor(t,r=!0){Ge(this,"anchor");W(this,Oe,new Map);W(this,Ve,new Map);W(this,ke,new Map);W(this,Et,new Set);W(this,lr,!0);W(this,or,()=>{var t=B;if(g(this,Oe).has(t)){var r=g(this,Oe).get(t),n=g(this,Ve).get(r);if(n)on(n),g(this,Et).delete(r);else{var s=g(this,ke).get(r);s&&(g(this,Ve).set(r,s.effect),g(this,ke).delete(r),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),n=s.effect)}for(const[a,o]of g(this,Oe)){if(g(this,Oe).delete(a),a===t)break;const u=g(this,ke).get(o);u&&(me(u.effect),g(this,ke).delete(o))}for(const[a,o]of g(this,Ve)){if(a===r||g(this,Et).has(a))continue;const u=()=>{if(Array.from(g(this,Oe).values()).includes(a)){var v=document.createDocumentFragment();Sa(o,v),v.append(rt()),g(this,ke).set(a,{effect:o,fragment:v})}else me(o);g(this,Et).delete(a),g(this,Ve).delete(a)};g(this,lr)||!n?(g(this,Et).add(a),Tt(o,u,!1)):u()}}});W(this,kr,t=>{g(this,Oe).delete(t);const r=Array.from(g(this,Oe).values());for(const[n,s]of g(this,ke))r.includes(n)||(me(s.effect),g(this,ke).delete(n))});this.anchor=t,H(this,lr,r)}ensure(t,r){var n=B,s=ma();if(r&&!g(this,Ve).has(t)&&!g(this,ke).has(t))if(s){var a=document.createDocumentFragment(),o=rt();a.append(o),g(this,ke).set(t,{effect:Ie(()=>r(o)),fragment:a})}else g(this,Ve).set(t,Ie(()=>r(this.anchor)));if(g(this,Oe).set(n,t),s){for(const[u,l]of g(this,Ve))u===t?n.unskip_effect(l):n.skip_effect(l);for(const[u,l]of g(this,ke))u===t?n.unskip_effect(l.effect):n.skip_effect(l.effect);n.oncommit(g(this,or)),n.ondiscard(g(this,kr))}else g(this,or).call(this)}}Oe=new WeakMap,Ve=new WeakMap,ke=new WeakMap,Et=new WeakMap,lr=new WeakMap,or=new WeakMap,kr=new WeakMap;function q(e,t,r=!1){var n=new Na(e),s=r?Pt:0;function a(o,u){n.ensure(o,u)}Rr(()=>{var o=!1;t((u,l=0)=>{o=!0,a(l,u)}),o||a(!1,null)},s)}function nt(e,t){return t}function Pi(e,t,r){for(var n=[],s=t.length,a,o=t.length,u=0;u<s;u++){let d=t[u];Tt(d,()=>{if(a){if(a.pending.delete(d),a.done.add(d),a.pending.size===0){var k=e.outrogroups;Zr(xr(a.done)),k.delete(a),k.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var l=n.length===0&&r!==null;if(l){var v=r,c=v.parentNode;vi(c),c.append(v),e.items.clear()}Zr(t,!l)}else a={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(a)}function Zr(e,t=!0){for(var r=0;r<e.length;r++)me(e[r],t)}var Dn;function Ee(e,t,r,n,s,a=null){var o=e,u=new Map,l=(t&Zn)!==0;if(l){var v=e;o=v.appendChild(rt())}var c=null,d=va(()=>{var w=r();return Qr(w)?w:w==null?[]:xr(w)}),k,p=!0;function b(){h.fallback=c,Ai(h,k,o,t,n),c!==null&&(k.length===0?(c.f&et)===0?on(c):(c.f^=et,er(c,null,o)):Tt(c,()=>{c=null}))}var x=Rr(()=>{k=i(d);for(var w=k.length,_=new Set,y=B,E=ma(),I=0;I<w;I+=1){var z=k[I],A=n(z,I),O=p?null:u.get(A);O?(O.v&&Yt(O.v,z),O.i&&Yt(O.i,I),E&&y.unskip_effect(O.e)):(O=zi(u,p?o:Dn??(Dn=rt()),z,A,I,s,t,r),p||(O.e.f|=et),u.set(A,O)),_.add(A)}if(w===0&&a&&!c&&(p?c=Ie(()=>a(o)):(c=Ie(()=>a(Dn??(Dn=rt()))),c.f|=et)),w>_.size&&ms(),!p)if(E){for(const[$,J]of u)_.has($)||y.skip_effect(J.e);y.oncommit(b),y.ondiscard(()=>{})}else b();i(d)}),h={effect:x,items:u,outrogroups:null,fallback:c};p=!1}function $t(e){for(;e!==null&&(e.f&Ue)===0;)e=e.next;return e}function Ai(e,t,r,n,s){var J,Z,re,F,N,U,ee,ne,be;var a=(n&Ps)!==0,o=t.length,u=e.items,l=$t(e.effect.first),v,c=null,d,k=[],p=[],b,x,h,w;if(a)for(w=0;w<o;w+=1)b=t[w],x=s(b,w),h=u.get(x).e,(h.f&et)===0&&((Z=(J=h.nodes)==null?void 0:J.a)==null||Z.measure(),(d??(d=new Set)).add(h));for(w=0;w<o;w+=1){if(b=t[w],x=s(b,w),h=u.get(x).e,e.outrogroups!==null)for(const Me of e.outrogroups)Me.pending.delete(h),Me.done.delete(h);if((h.f&et)!==0)if(h.f^=et,h===l)er(h,null,r);else{var _=c?c.next:l;h===e.effect.last&&(e.effect.last=h.prev),h.prev&&(h.prev.next=h.next),h.next&&(h.next.prev=h.prev),ot(e,c,h),ot(e,h,_),er(h,_,r),c=h,k=[],p=[],l=$t(c.next);continue}if((h.f&Se)!==0&&(on(h),a&&((F=(re=h.nodes)==null?void 0:re.a)==null||F.unfix(),(d??(d=new Set)).delete(h))),h!==l){if(v!==void 0&&v.has(h)){if(k.length<p.length){var y=p[0],E;c=y.prev;var I=k[0],z=k[k.length-1];for(E=0;E<k.length;E+=1)er(k[E],y,r);for(E=0;E<p.length;E+=1)v.delete(p[E]);ot(e,I.prev,z.next),ot(e,c,I),ot(e,z,y),l=y,c=z,w-=1,k=[],p=[]}else v.delete(h),er(h,l,r),ot(e,h.prev,h.next),ot(e,h,c===null?e.effect.first:c.next),ot(e,c,h),c=h;continue}for(k=[],p=[];l!==null&&l!==h;)(v??(v=new Set)).add(l),p.push(l),l=$t(l.next);if(l===null)continue}(h.f&et)===0&&k.push(h),c=h,l=$t(h.next)}if(e.outrogroups!==null){for(const Me of e.outrogroups)Me.pending.size===0&&(Zr(xr(Me.done)),(N=e.outrogroups)==null||N.delete(Me));e.outrogroups.size===0&&(e.outrogroups=null)}if(l!==null||v!==void 0){var A=[];if(v!==void 0)for(h of v)(h.f&Se)===0&&A.push(h);for(;l!==null;)(l.f&Se)===0&&l!==e.fallback&&A.push(l),l=$t(l.next);var O=A.length;if(O>0){var $=(n&Zn)!==0&&o===0?r:null;if(a){for(w=0;w<O;w+=1)(ee=(U=A[w].nodes)==null?void 0:U.a)==null||ee.measure();for(w=0;w<O;w+=1)(be=(ne=A[w].nodes)==null?void 0:ne.a)==null||be.fix()}Pi(e,A,$)}}a&&Ct(()=>{var Me,Xt;if(d!==void 0)for(h of d)(Xt=(Me=h.nodes)==null?void 0:Me.a)==null||Xt.apply()})}function zi(e,t,r,n,s,a,o,u){var l=(o&Rs)!==0?(o&As)===0?ii(r,!1,!1):zt(r):null,v=(o&Is)!==0?zt(s):null;return{v:l,i:v,e:Ie(()=>(a(t,l??r,v??s,u),()=>{e.delete(n)}))}}function er(e,t,r){if(e.nodes)for(var n=e.nodes.start,s=e.nodes.end,a=t&&(t.f&et)===0?t.nodes.start:r;n!==null;){var o=vr(n);if(a.before(n),n===s)return;n=o}}function ot(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}function Ni(e,t,...r){var n=new Na(e);Rr(()=>{const s=t()??null;n.ensure(s,s&&(a=>s(a,...r)))},Pt)}const Fn=[...` 	
\r\f¬†\v\uFEFF`];function Mi(e,t,r){var n=e==null?"":""+e;if(t&&(n=n?n+" "+t:t),r){for(var s of Object.keys(r))if(r[s])n=n?n+" "+s:s;else if(n.length)for(var a=s.length,o=0;(o=n.indexOf(s,o))>=0;){var u=o+a;(o===0||Fn.includes(n[o-1]))&&(u===n.length||Fn.includes(n[u]))?n=(o===0?"":n.substring(0,o))+n.substring(u+1):o=u}}return n===""?null:n}function Li(e,t){return e==null?null:String(e)}function Be(e,t,r,n,s,a){var o=e.__className;if(o!==r||o===void 0){var u=Mi(r,n,a);u==null?e.removeAttribute("class"):e.className=u,e.__className=r}else if(a&&s!==a)for(var l in a){var v=!!a[l];(s==null||v!==!!s[l])&&e.classList.toggle(l,v)}return a}function un(e,t,r,n){var s=e.__style;if(s!==t){var a=Li(t);a==null?e.removeAttribute("style"):e.style.cssText=a,e.__style=t}return n}function Ma(e,t,r=!1){if(e.multiple){if(t==null)return;if(!Qr(t))return Ds();for(var n of e.options)n.selected=t.includes(nr(n));return}for(n of e.options){var s=nr(n);if(oi(s,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function ji(e){var t=new MutationObserver(()=>{Ma(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),sn(()=>{t.disconnect()})}function La(e,t,r=t){var n=new WeakSet,s=!0;nn(e,"change",a=>{var o=a?"[selected]":":checked",u;if(e.multiple)u=[].map.call(e.querySelectorAll(o),nr);else{var l=e.querySelector(o)??e.querySelector("option:not([disabled])");u=l&&nr(l)}r(u),B!==null&&n.add(B)}),gi(()=>{var a=t();if(e===document.activeElement){var o=mr??B;if(n.has(o))return}if(Ma(e,a,s),s&&a===void 0){var u=e.querySelector(":checked");u!==null&&(a=nr(u),r(a))}e.__value=a,s=!1}),ji(e)}function nr(e){return"__value"in e?e.__value:e.value}const Oi=Symbol("is custom element"),Di=Symbol("is html");function ja(e,t,r,n){var s=Fi(e);s[t]!==(s[t]=r)&&(r==null?e.removeAttribute(t):typeof r!="string"&&Bi(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Fi(e){return e.__attributes??(e.__attributes={[Oi]:e.nodeName.includes("-"),[Di]:e.namespaceURI===Xn})}var Bn=new Map;function Bi(e){var t=e.getAttribute("is")||e.nodeName,r=Bn.get(t);if(r)return r;Bn.set(t,r=[]);for(var n,s=e,a=Element.prototype;a!==s;){n=us(s);for(var o in n)n[o].set&&r.push(o);s=Vn(s)}return r}function Oa(e,t,r=t){var n=new WeakSet;nn(e,"input",async s=>{var a=s?e.defaultValue:e.value;if(a=Lr(e)?jr(a):a,r(a),B!==null&&n.add(B),await ki(),a!==(a=t())){var o=e.selectionStart,u=e.selectionEnd,l=e.value.length;if(e.value=a??"",u!==null){var v=e.value.length;o===u&&u===l&&v>l?(e.selectionStart=v,e.selectionEnd=v):(e.selectionStart=o,e.selectionEnd=Math.min(u,v))}}}),Ir(t)==null&&e.value&&(r(Lr(e)?jr(e.value):e.value),B!==null&&n.add(B)),Tr(()=>{var s=t();if(e===document.activeElement){var a=mr??B;if(n.has(a))return}Lr(e)&&s===jr(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function qi(e,t,r=t){nn(e,"change",n=>{var s=n?e.defaultChecked:e.checked;r(s)}),Ir(t)==null&&r(e.checked),Tr(()=>{var n=t();e.checked=!!n})}function Lr(e){var t=e.type;return t==="number"||t==="range"}function jr(e){return e===""?null:+e}function Ui(e,t,r,n,s){var a=()=>{n(r[e])};r.addEventListener(t,a),s?Tr(()=>{r[e]=s()}):a(),(r===document.body||r===window||r===document)&&sn(()=>{r.removeEventListener(t,a)})}let _r=!1;function Gi(e){var t=_r;try{return _r=!1,[e(),_r]}finally{_r=t}}function Y(e,t,r,n){var _;var s=(r&Ms)!==0,a=(r&Ls)!==0,o=n,u=!0,l=()=>(u&&(u=!1,o=a?Ir(n):n),o),v;if(s){var c=Dt in e||gs in e;v=((_=Ot(e,t))==null?void 0:_.set)??(c&&t in e?y=>e[t]=y:void 0)}var d,k=!1;s?[d,k]=Gi(()=>e[t]):d=e[t],d===void 0&&n!==void 0&&(d=l(),v&&(xs(),v(d)));var p;if(p=()=>{var y=e[t];return y===void 0?l():(u=!0,y)},(r&Ns)===0)return p;if(v){var b=e.$$legacy;return(function(y,E){return arguments.length>0?((!E||b||k)&&v(E?p():y),y):p()})}var x=!1,h=((r&zs)!==0?Cr:va)(()=>(x=!1,p()));s&&i(h);var w=Q;return(function(y,E){if(arguments.length>0){const I=E?i(h):s?We(y):y;return P(h,I),x=!0,o!==void 0&&(o=I),y}return _t&&x||(w.f&tt)!==0?h.v:i(h)})}const Hi="5";var Kn;typeof window<"u"&&((Kn=window.__svelte??(window.__svelte={})).v??(Kn.v=new Set)).add(Hi);var Ki=C('<li class="svelte-1kst6pg"><button type="button"><span class="run-id svelte-1kst6pg"> </span> <span class="run-meta svelte-1kst6pg"> </span> <span> </span> <span class="run-time svelte-1kst6pg"> </span></button></li>'),Vi=C('<p class="no-runs svelte-1kst6pg">No runs in out/atlas/</p>'),Wi=C('<div class="run-browser svelte-1kst6pg"><button class="refresh svelte-1kst6pg">‚Üª Refresh</button> <ul class="run-list svelte-1kst6pg" role="list"></ul> <!></div>');function Yi(e,t){ie(t,!0);let r=Y(t,"runs",19,()=>[]),n=Y(t,"selectedRunId",3,null);function s(c){return c?new Date(c).toLocaleString():"‚Äî"}var a=Wi(),o=f(a),u=m(o,2);Ee(u,21,r,c=>c.run_id,(c,d)=>{var k=Ki(),p=f(k);let b;var x=f(p),h=f(x),w=m(x,2),_=f(w),y=m(w,2),E=f(y),I=m(y,2),z=f(I);D((A,O)=>{b=Be(p,1,"run-item svelte-1kst6pg",null,b,{selected:n()===i(d).run_id}),R(h,i(d).run_id),R(_,`${i(d).item_count??0??""} items
          ¬∑ ${i(d).coverage_sources!=null&&i(d).configured_sources!=null?`${i(d).coverage_sources}/${i(d).configured_sources} sources`:"‚Äî"}`),Be(y,1,`verdict verdict-${A??""}`,"svelte-1kst6pg"),R(E,i(d).verdict||"UNKNOWN"),R(z,O)},[()=>(i(d).verdict||"UNKNOWN").toLowerCase(),()=>s(i(d).mtime)]),te("click",p,()=>t.onSelect(i(d).run_id)),S(c,k)});var l=m(u,2);{var v=c=>{var d=Vi();S(c,d)};q(l,c=>{r().length===0&&c(v)})}te("click",o,function(...c){var d;(d=t.onRefresh)==null||d.apply(this,c)}),S(e,a),le()}it(["click"]);async function Ze(e){try{const t=await fetch(e);return t.ok?await t.json():null}catch{return null}}async function qn(e){try{const t=await fetch(e);return t.ok?await t.text():null}catch{return null}}async function Un(e){try{const t=await fetch(e);if(!t.ok)return null;const r=await t.text(),n=t.headers.get("content-type")??"";return{text:r,contentType:n,url:e,status:t.status,bodyPreview:r.slice(0,120)}}catch{return null}}async function Da(e,t={}){const r=t.as??"text";try{const n=await fetch(e),s=n.headers.get("content-type")??"",a=await n.text(),o=a.slice(0,120);if(r==="json"){const u=n.ok?JSON.parse(a):null;return{status:n.status,contentType:s,bodyPreview:o,url:e,data:u}}return{status:n.status,contentType:s,bodyPreview:o,url:e,data:n.ok?a:null}}catch{return null}}var Ji=C('<span class="panel-count svelte-1c3gou4"> </span>'),Zi=C("<span> </span>"),Xi=C('<span class="panel-loading svelte-1c3gou4"></span>'),Qi=C('<div class="error-msg svelte-1c3gou4"> </div>'),$i=C('<div class="loading-msg svelte-1c3gou4">Loading...</div>'),el=C('<div class="panel svelte-1c3gou4"><div class="panel-header svelte-1c3gou4"><div class="panel-title-row svelte-1c3gou4"><h3 class="panel-title svelte-1c3gou4"> </h3> <!> <!> <!></div></div> <div class="panel-content svelte-1c3gou4"><!></div></div>');function gt(e,t){let r=Y(t,"count",3,null),n=Y(t,"status",3,""),s=Y(t,"statusClass",3,""),a=Y(t,"loading",3,!1),o=Y(t,"error",3,null);var u=el(),l=f(u),v=f(l),c=f(v),d=f(c),k=m(c,2);{var p=A=>{var O=Ji(),$=f(O);D(()=>R($,r())),S(A,O)};q(k,A=>{r()!==null&&A(p)})}var b=m(k,2);{var x=A=>{var O=Zi(),$=f(O);D(()=>{Be(O,1,`panel-status ${s()??""}`,"svelte-1c3gou4"),R($,n())}),S(A,O)};q(b,A=>{n()&&A(x)})}var h=m(b,2);{var w=A=>{var O=Xi();S(A,O)};q(h,A=>{a()&&A(w)})}var _=m(l,2),y=f(_);{var E=A=>{var O=Qi(),$=f(O);D(()=>R($,o())),S(A,O)},I=A=>{var O=$i();S(A,O)},z=A=>{var O=Jr(),$=xe(O);{var J=Z=>{var re=Jr(),F=xe(re);Ni(F,()=>t.children),S(Z,re)};q($,Z=>{t.children&&Z(J)})}S(A,O)};q(y,A=>{o()?A(E):a()?A(I,1):A(z,!1)})}D(()=>R(d,t.title)),S(e,u)}var tl=C('<header class="header svelte-25h2vn"><div class="header-left svelte-25h2vn"><h1 class="logo svelte-25h2vn"> </h1> <button class="run-id-btn svelte-25h2vn" title="Copy run_id"><code class="svelte-25h2vn"> </code> <span class="copy-hint svelte-25h2vn">üìã</span></button></div> <div class="header-center svelte-25h2vn"><span class="meta-item svelte-25h2vn"> </span> <span class="meta-item svelte-25h2vn"> </span> <span> </span> <span class="meta-item tg-status svelte-25h2vn"> </span></div></header>');function rl(e,t){ie(t,!0);let r=Y(t,"title",3,"ATLAS VIEWER");const n=M(()=>t.mtime?new Date(t.mtime).toLocaleString():"‚Äî"),s=M(()=>t.coverageSources!=null&&t.configuredSources!=null?`${t.coverageSources}/${t.configuredSources}`:"‚Äî"),a=M(()=>t.tgStatus??"Not configured");function o(){t.runId&&navigator.clipboard&&navigator.clipboard.writeText(t.runId)}var u=tl(),l=f(u),v=f(l),c=f(v),d=m(v,2),k=f(d),p=f(k),b=m(l,2),x=f(b),h=f(x),w=m(x,2),_=f(w),y=m(w,2),E=f(y),I=m(y,2),z=f(I);D(A=>{R(c,r()),R(p,t.runId??"‚Äî"),R(h,`Last updated: ${i(n)??""}`),R(_,`Coverage: ${i(s)??""}`),Be(y,1,`meta-item verdict verdict-${A??""}`,"svelte-25h2vn"),R(E,t.verdict||"UNKNOWN"),R(z,i(a))},[()=>(t.verdict||"UNKNOWN").toLowerCase()]),te("click",d,o),S(e,u),le()}it(["click"]);var nl=C("<div> </div>"),al=C('<div class="kpi-cards svelte-vs55d7" data-testid="kpi-cards"><div class="kpi-card svelte-vs55d7"><div class="kpi-label svelte-vs55d7">Item count</div> <div class="kpi-value svelte-vs55d7"> </div></div> <div class="kpi-card svelte-vs55d7"><div class="kpi-label svelte-vs55d7">Structural (‚â•7)</div> <div class="kpi-value svelte-vs55d7"> </div></div> <div class="kpi-card svelte-vs55d7"><div class="kpi-label svelte-vs55d7">Top civ tag</div> <div class="kpi-value svelte-vs55d7"> </div></div> <div class="kpi-card svelte-vs55d7"><div class="kpi-label svelte-vs55d7">TG length</div> <div class="kpi-value svelte-vs55d7"> </div> <!></div> <div class="kpi-card svelte-vs55d7"><div class="kpi-label svelte-vs55d7">Sources</div> <div class="kpi-value svelte-vs55d7"><!></div></div> <div class="kpi-card svelte-vs55d7"><div class="kpi-label svelte-vs55d7">AI-only reject</div> <div class="kpi-value svelte-vs55d7"> </div></div></div>');function sl(e,t){ie(t,!0);let r=Y(t,"structuralCount",3,null),n=Y(t,"topCivTag",3,null),s=Y(t,"topCivCount",3,null),a=Y(t,"tgLimit",3,4096);const o=M(()=>t.tgLength!=null?Math.round(t.tgLength/a()*100):null);var u=al(),l=f(u),v=m(f(l),2),c=f(v),d=m(l,2),k=m(f(d),2),p=f(k),b=m(d,2),x=m(f(b),2),h=f(x),w=m(b,2),_=m(f(w),2),y=f(_),E=m(_,2);{var I=N=>{var U=nl(),ee=f(U);D(()=>{Be(U,1,`kpi-sub ${i(o)>100?"over":""}`,"svelte-vs55d7"),R(ee,`${i(o)??""}%`)}),S(N,U)};q(E,N=>{i(o)!=null&&N(I)})}var z=m(w,2),A=m(f(z),2),O=f(A);{var $=N=>{var U=On();D(()=>R(U,`OK ${t.coverageStats.ok??0??""} ¬∑ Empty ${t.coverageStats.empty??0??""} ¬∑ Rate-limited ${t.coverageStats.rate_limited??0??""} ¬∑ Errors ${t.coverageStats.error??0??""}`)),S(N,U)},J=N=>{var U=On("‚Äî");S(N,U)};q(O,N=>{t.coverageStats?N($):N(J,!1)})}var Z=m(z,2),re=m(f(Z),2),F=f(re);D(()=>{R(c,t.itemCount??0),R(p,r()??0),R(h,`${n()??"‚Äî"??""} (${s()??0??""})`),R(y,`${t.tgLength??0??""} / ${a()??""}`),R(F,t.aiRejectCount??0)}),S(e,u),le()}var il=C('<div class="source-reason svelte-szfpuv"> </div>'),ll=C('<button type="button"><div class="source-name svelte-szfpuv"> </div> <div class="source-meta svelte-szfpuv"><span class="status-badge svelte-szfpuv"> </span> <span class="item-count"> </span></div> <!></button>'),ol=C('<div class="empty svelte-szfpuv">No coverage data</div>'),ul=C('<div class="source-health svelte-szfpuv"><!> <!></div>');function vl(e,t){ie(t,!0);let r=Y(t,"coverage",19,()=>[]),n=Y(t,"sourceIdToName",19,()=>({}));var s=ul(),a=f(s);Ee(a,17,r,l=>l.source_id,(l,v)=>{var c=ll(),d=f(c),k=f(d),p=m(d,2),b=f(p),x=f(b),h=m(b,2),w=f(h),_=m(p,2);{var y=E=>{var I=il(),z=f(I);D(()=>R(z,i(v).reason)),S(E,I)};q(_,E=>{i(v).reason&&E(y)})}D(()=>{Be(c,1,`source-card status-${i(v).status??"unknown"??""}`,"svelte-szfpuv"),R(k,i(v).source_id),R(x,i(v).status??"‚Äî"),R(w,`${i(v).item_count??0??""} items`)}),te("click",c,()=>{var E;return(E=t.onSourceClick)==null?void 0:E.call(t,n()[i(v).source_id]??i(v).source_id)}),S(l,c)});var o=m(a,2);{var u=l=>{var v=ol();S(l,v)};q(o,l=>{r().length===0&&l(u)})}S(e,s),le()}it(["click"]);var cl=C('<button type="button" class="bar-row svelte-1wd7b3q"><span class="bar-label svelte-1wd7b3q"> </span> <div class="bar-track svelte-1wd7b3q"><div class="bar-fill svelte-1wd7b3q"></div></div> <span class="bar-value svelte-1wd7b3q"> </span></button>'),fl=C('<div class="empty svelte-1wd7b3q">No items to distribute</div>'),dl=C('<div class="distribution svelte-1wd7b3q"><!> <!></div>');function _l(e,t){ie(t,!0);let r=Y(t,"items",19,()=>[]);Y(t,"coverage",19,()=>[]);const n=M(()=>{const v={};for(const c of r()){const d=c.source_name??"unknown";v[d]=(v[d]??0)+1}return Object.entries(v).sort((c,d)=>d[1]-c[1])}),s=M(()=>i(n).length?Math.max(...i(n).map(([,v])=>v)):1);var a=dl(),o=f(a);Ee(o,17,()=>i(n),nt,(v,c)=>{var d=M(()=>_s(i(c),2));let k=()=>i(d)[0],p=()=>i(d)[1];var b=cl(),x=f(b),h=f(x),w=m(x,2),_=f(w),y=m(w,2),E=f(y);D(()=>{R(h,k()),un(_,`width: ${p()/i(s)*100}%`),R(E,p())}),te("click",b,()=>{var I;return(I=t.onSourceClick)==null?void 0:I.call(t,k())}),S(v,b)});var u=m(o,2);{var l=v=>{var c=fl();S(v,c)};q(u,v=>{i(n).length===0&&v(l)})}S(e,a),le()}it(["click"]);var hl=C('<span class="item-date svelte-1pckyab"> </span>'),gl=C('<div class="item-summary svelte-1pckyab"> </div>'),pl=C('<a target="_blank" rel="noopener" class="item-card svelte-1pckyab"><div class="item-title svelte-1pckyab"> </div> <div class="item-meta svelte-1pckyab"><span class="source-chip svelte-1pckyab"> </span> <!></div> <!></a>');function ml(e,t){ie(t,!0);const r=M(()=>{var p,b,x;return(((p=t.item)==null?void 0:p.summary)??"").slice(0,150)+((((x=(b=t.item)==null?void 0:b.summary)==null?void 0:x.length)??0)>150?"‚Ä¶":"")});var n=pl(),s=f(n),a=f(s),o=m(s,2),u=f(o),l=f(u),v=m(u,2);{var c=p=>{var b=hl(),x=f(b);D(h=>R(x,h),[()=>new Date(t.item.published_at).toLocaleDateString()]),S(p,b)};q(v,p=>{var b;(b=t.item)!=null&&b.published_at&&p(c)})}var d=m(o,2);{var k=p=>{var b=gl(),x=f(b);D(()=>R(x,i(r))),S(p,b)};q(d,p=>{i(r)&&p(k)})}D(()=>{var p,b,x;ja(n,"href",(p=t.item)==null?void 0:p.url),R(a,((b=t.item)==null?void 0:b.title)??"‚Äî"),R(l,((x=t.item)==null?void 0:x.source_name)??"‚Äî")}),S(e,n),le()}var bl=C('<button class="close-btn svelte-1olb7zb">‚úï</button>'),wl=C("<option> </option>"),yl=C('<div class="drilldown svelte-1olb7zb"><div class="drilldown-header svelte-1olb7zb"><h3 class="svelte-1olb7zb">Items</h3> <!></div> <div class="filters svelte-1olb7zb"><input type="text" placeholder="Search" class="svelte-1olb7zb"/> <select class="svelte-1olb7zb"><option>All sources</option><!></select></div> <div class="items-list svelte-1olb7zb"></div> <div class="pagination svelte-1olb7zb"><span class="pagination-info"> </span> <div class="pagination-btns svelte-1olb7zb"><button class="svelte-1olb7zb">‚Üê</button> <button class="svelte-1olb7zb">‚Üí</button></div></div></div>');function Gn(e,t){ie(t,!0);let r=Y(t,"items",19,()=>[]),n=Y(t,"initialSourceFilter",3,null),s=Y(t,"pageSize",3,50),a=Y(t,"showClose",3,!0),o=G(1),u=G(""),l=G("");Nt(()=>{const F=n()??"";F&&P(l,F,!0)});const v=M(()=>{const F=performance.now();let N=r();if(i(l)&&(N=N.filter(ee=>(ee.source_name??"")===i(l))),i(u).trim()){const ee=i(u).toLowerCase();N=N.filter(ne=>(ne.title??"").toLowerCase().includes(ee)||(ne.source_name??"").toLowerCase().includes(ee)||(ne.summary??"").toLowerCase().includes(ee))}const U=performance.now()-F;return typeof window<"u"&&r().length>100&&console.log(`[atlas] filter/search: ${r().length} items in ${U.toFixed(1)}ms`),N}),c=M(()=>Math.ceil(i(v).length/s())||1),d=M(()=>{const F=performance.now(),N=i(v).slice((i(o)-1)*s(),i(o)*s()),U=performance.now()-F;return typeof window<"u"&&i(v).length>100&&console.log(`[atlas] paginate render: ${N.length} items in ${U.toFixed(1)}ms`),N}),k=M(()=>[...new Set(r().map(F=>F.source_name).filter(Boolean))].sort());Nt(()=>{i(l),i(u),P(o,1)});var p=yl(),b=f(p),x=m(f(b),2);{var h=F=>{var N=bl();te("click",N,function(...U){var ee;(ee=t.onClose)==null||ee.apply(this,U)}),S(F,N)};q(x,F=>{a()&&F(h)})}var w=m(b,2),_=f(w),y=m(_,2),E=f(y);E.value=E.__value="";var I=m(E);Ee(I,17,()=>i(k),nt,(F,N)=>{var U=wl(),ee=f(U),ne={};D(()=>{R(ee,i(N)),ne!==(ne=i(N))&&(U.value=(U.__value=i(N))??"")}),S(F,U)});var z=m(w,2);Ee(z,21,()=>i(d),F=>F.id,(F,N)=>{ml(F,{get item(){return i(N)}})});var A=m(z,2),O=f(A),$=f(O),J=m(O,2),Z=f(J),re=m(Z,2);D(()=>{R($,`${i(v).length??""} total ¬∑ page ${i(o)??""} of ${i(c)??""}`),Z.disabled=i(o)<=1,re.disabled=i(o)>=i(c)}),Oa(_,()=>i(u),F=>P(u,F)),La(y,()=>i(l),F=>P(l,F)),te("click",Z,()=>P(o,Math.max(1,i(o)-1),!0)),te("click",re,()=>P(o,Math.min(i(c),i(o)+1),!0)),S(e,p),le()}it(["click"]);var kl=C('<button type="button" class="bar-row svelte-1b2mxit"><span class="bar-label svelte-1b2mxit"> </span> <div class="bar-track svelte-1b2mxit"><div class="bar-fill svelte-1b2mxit"></div></div> <span class="bar-value svelte-1b2mxit"> </span></button>'),xl=C('<div class="structural-hint svelte-1b2mxit"> </div>'),Sl=C('<div class="civ-heatmap svelte-1b2mxit" data-testid="civilization-panel"><div class="heatmap-bars svelte-1b2mxit"></div> <!></div>');function El(e,t){ie(t,!0);let r=Y(t,"structuralCountByTag",19,()=>({})),n=Y(t,"structuralCount",3,0);const s=["Vinge/Compute","Banks/Governance","Antimemetics","TedChiang/Language","Egan","Watts","Simulation","Religion/Meaning"],a=M(()=>s.map(d=>({tag:d,count:r()[d]??0}))),o=M(()=>Math.max(1,...i(a).map(d=>d.count)));var u=Sl(),l=f(u);Ee(l,21,()=>i(a),nt,(d,k)=>{let p=()=>i(k).tag,b=()=>i(k).count;var x=kl(),h=f(x),w=f(h),_=m(h,2),y=f(_),E=m(_,2),I=f(E);D(()=>{R(w,p()),un(y,`height: ${b()/i(o)*100}%`),R(I,b())}),te("click",x,()=>{var z;return(z=t.onTagClick)==null?void 0:z.call(t,p())}),S(d,x)});var v=m(l,2);{var c=d=>{var k=xl(),p=f(k);D(()=>R(p,`Structural (score‚â•7): ${n()??""}`)),S(d,k)};q(v,d=>{n()>0&&d(c)})}S(e,u),le()}it(["click"]);var Cl=C('<div class="bar-cell svelte-13vbvr4"><span class="cell-tag svelte-13vbvr4"> </span> <div class="cell-bar-track svelte-13vbvr4"><div class="cell-bar-fill svelte-13vbvr4"></div></div> <span class="cell-value svelte-13vbvr4"> </span></div>'),Tl=C('<div class="empty svelte-13vbvr4">No 5D scores yet</div>'),Rl=C('<div class="civ-5d svelte-13vbvr4"><div class="axis-labels svelte-13vbvr4"><span class="axis-label">5D avg</span></div> <div class="bars-grid svelte-13vbvr4"></div> <!></div>');function Il(e,t){ie(t,!0);let r=Y(t,"avgScoreByTag",19,()=>({}));const n=["Vinge/Compute","Banks/Governance","Antimemetics","TedChiang/Language","Egan","Watts","Simulation","Religion/Meaning"],s=M(()=>n.filter(c=>(r()[c]??0)>0).map(c=>({tag:c,avg:r()[c]??0}))),a=M(()=>Math.max(.1,...i(s).map(c=>c.avg)));var o=Rl(),u=m(f(o),2);Ee(u,21,()=>i(s),nt,(c,d)=>{let k=()=>i(d).tag,p=()=>i(d).avg;var b=Cl(),x=f(b),h=f(x),w=m(x,2),_=f(w),y=m(w,2),E=f(y);D(I=>{R(h,k()),un(_,`width: ${p()/i(a)*100}%`),R(E,I)},[()=>p().toFixed(1)]),S(c,b)});var l=m(u,2);{var v=c=>{var d=Tl();S(c,d)};q(l,c=>{i(s).length===0&&c(v)})}S(e,o),le()}var Pl=C('<span class="score-badge svelte-135z7ar"> </span>'),Al=C('<span class="item-date svelte-135z7ar"> </span>'),zl=C("<span> </span>"),Nl=C('<div class="item-summary-zh svelte-135z7ar"> </div>'),Ml=C('<a target="_blank" rel="noopener" class="civ-item-card svelte-135z7ar"><div class="item-title svelte-135z7ar"> </div> <div class="item-meta svelte-135z7ar"><span class="source-chip svelte-135z7ar"> </span> <!> <!></div> <div class="five-d-dots svelte-135z7ar" title="5D: compute, governance, narrative, behavior, capability"></div> <!></a>');function Ll(e,t){ie(t,!0);const r=M(()=>{var w;return((w=t.item)==null?void 0:w.score_5d)??{compute:0,governance:0,narrative:0,behavior:0,capability:0}}),n=M(()=>[i(r).compute,i(r).governance,i(r).narrative,i(r).behavior,i(r).capability]);var s=Ml(),a=f(s),o=f(a),u=m(a,2),l=f(u),v=f(l),c=m(l,2);{var d=w=>{var _=Pl(),y=f(_);D(()=>R(y,t.item.score_total)),S(w,_)};q(c,w=>{var _;((_=t.item)==null?void 0:_.score_total)!=null&&w(d)})}var k=m(c,2);{var p=w=>{var _=Al(),y=f(_);D(E=>R(y,E),[()=>new Date(t.item.published_at).toLocaleDateString()]),S(w,_)};q(k,w=>{var _;(_=t.item)!=null&&_.published_at&&w(p)})}var b=m(u,2);Ee(b,21,()=>i(n),nt,(w,_)=>{var y=zl();let E;var I=f(y);D(()=>{E=Be(y,1,"dot svelte-135z7ar",null,E,{filled:i(_)>=1}),R(I,i(_)>=2?"‚óè":i(_)>=1?"‚óã":"¬∑")}),S(w,y)});var x=m(b,2);{var h=w=>{var _=Nl(),y=f(_);D(()=>R(y,t.item.summary_zh)),S(w,_)};q(x,w=>{var _;(_=t.item)!=null&&_.summary_zh&&w(h)})}D(()=>{var w,_,y;ja(s,"href",(w=t.item)==null?void 0:w.url),R(o,((_=t.item)==null?void 0:_.title)??"‚Äî"),R(v,((y=t.item)==null?void 0:y.source_name)??"‚Äî")}),S(e,s),le()}var jl=C("<option> </option>"),Ol=C('<div class="civ-drilldown svelte-uzbdbw"><div class="drilldown-header svelte-uzbdbw"><h3 class="svelte-uzbdbw">Civilization Items</h3> <button class="close-btn svelte-uzbdbw">‚úï</button></div> <div class="filters svelte-uzbdbw"><input type="text" placeholder="Search" class="svelte-uzbdbw"/> <select class="svelte-uzbdbw"><option>All tags</option><!></select> <label class="toggle-label svelte-uzbdbw"><input type="checkbox" class="svelte-uzbdbw"/> Structural only (‚â•7)</label></div> <div class="items-list svelte-uzbdbw"></div> <div class="pagination svelte-uzbdbw"><span class="pagination-info"> </span> <div class="pagination-btns svelte-uzbdbw"><button class="svelte-uzbdbw">‚Üê</button> <button class="svelte-uzbdbw">‚Üí</button></div></div></div>');function Dl(e,t){ie(t,!0);let r=Y(t,"items",19,()=>[]),n=Y(t,"initialTagFilter",3,null),s=Y(t,"pageSize",3,50),a=G(1),o=G(""),u=G(""),l=G(!1);Nt(()=>{const N=n()??"";N&&P(u,N,!0)});const v=M(()=>{const N=performance.now();let U=r();if(i(u)&&(U=U.filter(ne=>(ne.civ_primary_tag??"")===i(u))),i(l)&&(U=U.filter(ne=>(ne.score_total??0)>=7)),i(o).trim()){const ne=i(o).toLowerCase();U=U.filter(be=>(be.title??"").toLowerCase().includes(ne)||(be.source_name??"").toLowerCase().includes(ne)||(be.summary_zh??"").toLowerCase().includes(ne)||(be.summary??"").toLowerCase().includes(ne))}const ee=performance.now()-N;return typeof window<"u"&&r().length>100&&console.log(`[atlas] civ drilldown filter: ${r().length} items in ${ee.toFixed(1)}ms`),U}),c=M(()=>Math.ceil(i(v).length/s())||1),d=M(()=>i(v).slice((i(a)-1)*s(),i(a)*s())),k=M(()=>[...new Set(r().map(N=>N.civ_primary_tag).filter(Boolean))].sort());Nt(()=>{i(u),i(o),i(l),P(a,1)});var p=Ol(),b=f(p),x=m(f(b),2),h=m(b,2),w=f(h),_=m(w,2),y=f(_);y.value=y.__value="";var E=m(y);Ee(E,17,()=>i(k),nt,(N,U)=>{var ee=jl(),ne=f(ee),be={};D(()=>{R(ne,i(U)),be!==(be=i(U))&&(ee.value=(ee.__value=i(U))??"")}),S(N,ee)});var I=m(_,2),z=f(I),A=m(h,2);Ee(A,21,()=>i(d),N=>N.id??N.url??N.title,(N,U)=>{Ll(N,{get item(){return i(U)}})});var O=m(A,2),$=f(O),J=f($),Z=m($,2),re=f(Z),F=m(re,2);D(()=>{R(J,`${i(v).length??""} total ¬∑ page ${i(a)??""} of ${i(c)??""}`),re.disabled=i(a)<=1,F.disabled=i(a)>=i(c)}),te("click",x,function(...N){var U;(U=t.onClose)==null||U.apply(this,N)}),Oa(w,()=>i(o),N=>P(o,N)),La(_,()=>i(u),N=>P(u,N)),qi(z,()=>i(l),N=>P(l,N)),te("click",re,()=>P(a,Math.max(1,i(a)-1),!0)),te("click",F,()=>P(a,Math.min(i(c),i(a)+1),!0)),S(e,p),le()}it(["click"]);const Fl=[{id:"tech_breakthrough",label_zh:"ÊäÄÊúØÁ™ÅÁ†¥",label_en:"Tech Breakthrough"},{id:"social_phenomenon",label_zh:"Á§æ‰ºöÁé∞Ë±°",label_en:"Social Phenomenon"},{id:"finance_capital",label_zh:"ÈáëËûç‰∏éËµÑÊú¨",label_en:"Finance & Capital"},{id:"policy_governance",label_zh:"ÊîøÁ≠ñ‰∏éÊ≤ªÁêÜ",label_en:"Policy & Governance"},{id:"safety_incident",label_zh:"ÂÆâÂÖ®‰∫ãÊïÖ",label_en:"Safety & Incident"},{id:"energy_environment",label_zh:"ËÉΩÊ∫ê/ÁéØÂ¢É",label_en:"Energy & Environment"}],Bl={tech_breakthrough:["OpenAI Blog","Anthropic News","DeepMind Blog","Stanford HAI","HN AI"],social_phenomenon:["Reuters Tech","FT Tech","Reddit r/ML","Mollick Substack"],finance_capital:["Reuters Business","FT Markets","WSJ Tech","TechCrunch"],policy_governance:["Reuters Politics","FT Policy","EU Commission","Brookings"],safety_incident:["OpenAI Blog","Anthropic News","Krebs","AI Safety Institute"],energy_environment:["Reuters Energy","FT Climate","Stanford HAI","IEEE Spectrum"]},ql={tech_breakthrough:["Ethan Mollick","Gary Marcus","Geoffrey Hinton"],social_phenomenon:["Ethan Mollick","Kate Crawford","Meredith Broussard"],finance_capital:["Sam Altman"],policy_governance:["Jan Leike","Nick Bostrom","Yoshua Bengio"],safety_incident:["Gary Marcus","Jan Leike","Dario Amodei","Geoffrey Hinton"],energy_environment:["Kate Crawford"]};var Ul=C('<li><button type="button"><span class="cat-label"> </span> <span class="cat-count svelte-957r14"> </span></button></li>'),Gl=C('<div class="radar-categories svelte-957r14" data-testid="radar-categories-panel"><h3 class="panel-title svelte-957r14">Radar Categories</h3> <ul class="category-list svelte-957r14"></ul></div>');function Hl(e,t){ie(t,!0);let r=Y(t,"selectedCategory",3,null),n=Y(t,"countsByRadar",19,()=>({}));var s=Gl(),a=m(f(s),2);Ee(a,21,()=>Fl,nt,(o,u)=>{var l=Ul(),v=f(l);let c;var d=f(v),k=f(d),p=m(d,2),b=f(p);D(()=>{c=Be(v,1,"category-btn svelte-957r14",null,c,{selected:r()===i(u).id}),R(k,i(u).label_zh),R(b,n()[i(u).id]??0)}),te("click",v,()=>{var x;return(x=t.onSelect)==null?void 0:x.call(t,i(u).id)}),S(o,l)}),S(e,s),le()}it(["click"]);var Kl=C('<li><span class="chip svelte-e404sk"> </span></li>'),Vl=C('<li><span class="chip kol svelte-e404sk"> </span></li>'),Wl=C('<div class="sources-section"><h4 class="subtitle svelte-e404sk">Sources</h4> <ul class="chip-list svelte-e404sk"></ul></div> <div class="kols-section"><h4 class="subtitle svelte-e404sk">KOL</h4> <ul class="chip-list svelte-e404sk"></ul></div>',1),Yl=C('<p class="hint svelte-e404sk">Select a category</p>'),Jl=C('<div class="sources-kol-panel svelte-e404sk" data-testid="sources-kol-panel"><h3 class="panel-title svelte-e404sk">Sources & KOL</h3> <!></div>');function Zl(e,t){ie(t,!0);let r=Y(t,"selectedCategory",3,null);const n=M(()=>r()?Bl[r()]??[]:[]),s=M(()=>r()?ql[r()]??[]:[]);var a=Jl(),o=m(f(a),2);{var u=v=>{var c=Wl(),d=xe(c),k=m(f(d),2);Ee(k,21,()=>i(n),nt,(x,h)=>{var w=Kl(),_=f(w),y=f(_);D(()=>R(y,i(h))),S(x,w)});var p=m(d,2),b=m(f(p),2);Ee(b,21,()=>i(s),nt,(x,h)=>{var w=Vl(),_=f(w),y=f(_);D(()=>R(y,i(h))),S(x,w)}),S(v,c)},l=v=>{var c=Yl();S(v,c)};q(o,v=>{r()?v(u):v(l,!1)})}S(e,a),le()}var Xl=C('<div class="error-banner svelte-ayt4t5" role="alert"><strong>API routing error:</strong> rendered_text returned JSON (likely runs list). <br/><small> </small></div>'),Ql=C('<span class="warn svelte-ayt4t5">‚ö† Over TG limit (4096)</span>'),$l=C('<span class="ok svelte-ayt4t5">‚úì Within TG limit</span>'),eo=C('<div class="meta svelte-ayt4t5"><span> </span> <!></div> <pre class="rendered svelte-ayt4t5"> </pre>',1),to=C('<div class="rendered-panel svelte-ayt4t5"><!></div>');function ro(e,t){ie(t,!0);let r=Y(t,"renderedText",3,""),n=Y(t,"routingError",3,null);const s=M(()=>{var d;return((d=r())==null?void 0:d.length)??0}),a=4096,o=M(()=>i(s)>a);var u=to(),l=f(u);{var v=d=>{var k=Xl(),p=m(f(k),3),b=f(p);D(()=>R(b,`URL: ${n().url??""}`)),S(d,k)},c=d=>{var k=eo(),p=xe(k),b=f(p),x=f(b),h=m(b,2);{var w=I=>{var z=Ql();S(I,z)},_=I=>{var z=$l();S(I,z)};q(h,I=>{i(o)?I(w):I(_,!1)})}var y=m(p,2),E=f(y);D(()=>{R(x,`Chars: ${i(s)??""}`),R(E,r()||"(empty)")}),S(d,k)};q(l,d=>{n()?d(v):d(c,!1)})}S(e,u),le()}var no=C('<p class="empty svelte-kp9k3d">No acceptance/audit for this run (normal for non-acceptance runs).</p>'),ao=C('<section class="svelte-kp9k3d"><h4 class="svelte-kp9k3d">Gates</h4> <pre class="svelte-kp9k3d"> </pre></section>'),so=C('<section class="svelte-kp9k3d"><h4 class="svelte-kp9k3d">Audit Summary</h4> <pre class="svelte-kp9k3d"> </pre></section>'),io=C('<section class="svelte-kp9k3d"><h4 class="svelte-kp9k3d">Provenance</h4> <pre class="svelte-kp9k3d"> </pre></section>'),lo=C('<pre class="svelte-kp9k3d"> </pre>'),oo=C('<h5 class="svelte-kp9k3d">Sent</h5> <pre class="tg-text svelte-kp9k3d"> </pre>',1),uo=C('<h5 class="svelte-kp9k3d">Readback</h5> <pre class="tg-text svelte-kp9k3d"> </pre>',1),vo=C('<section class="svelte-kp9k3d"><h4 class="svelte-kp9k3d">TG Evidence</h4> <!> <!> <!></section>'),co=C("<!> <!> <!> <!>",1),fo=C('<details class="evidence-panel svelte-kp9k3d"><summary class="svelte-kp9k3d">Evidence (audit / provenance / TG)</summary> <!></details>');function _o(e,t){ie(t,!0);let r=G(!1);const n=M(()=>!!t.acceptanceReport||!!t.auditSummary||!!t.provenance||!!t.tgProvenance||t.tgSent!=null||t.tgReadback!=null);var s=fo(),a=m(f(s),2);{var o=l=>{var v=no();S(l,v)},u=l=>{var v=co(),c=xe(v);{var d=_=>{var y=ao(),E=m(f(y),2),I=f(E);D(z=>R(I,z),[()=>JSON.stringify(t.acceptanceReport.gates,null,2)]),S(_,y)};q(c,_=>{var y;(y=t.acceptanceReport)!=null&&y.gates&&_(d)})}var k=m(c,2);{var p=_=>{var y=so(),E=m(f(y),2),I=f(E);D(z=>R(I,z),[()=>JSON.stringify(t.auditSummary,null,2)]),S(_,y)};q(k,_=>{t.auditSummary&&_(p)})}var b=m(k,2);{var x=_=>{var y=io(),E=m(f(y),2),I=f(E);D(z=>R(I,z),[()=>JSON.stringify(t.provenance,null,2)]),S(_,y)};q(b,_=>{t.provenance&&_(x)})}var h=m(b,2);{var w=_=>{var y=vo(),E=m(f(y),2);{var I=J=>{var Z=lo(),re=f(Z);D(F=>R(re,F),[()=>JSON.stringify(t.tgProvenance,null,2)]),S(J,Z)};q(E,J=>{t.tgProvenance&&J(I)})}var z=m(E,2);{var A=J=>{var Z=oo(),re=m(xe(Z),2),F=f(re);D(()=>R(F,t.tgSent)),S(J,Z)};q(z,J=>{t.tgSent!=null&&J(A)})}var O=m(z,2);{var $=J=>{var Z=uo(),re=m(xe(Z),2),F=f(re);D(()=>R(F,t.tgReadback)),S(J,Z)};q(O,J=>{t.tgReadback!=null&&J($)})}S(_,y)};q(h,_=>{(t.tgProvenance||t.tgSent!=null||t.tgReadback!=null)&&_(w)})}S(l,v)};q(a,l=>{i(n)?l(u,!1):l(o)})}Ui("open","toggle",s,l=>P(r,l),()=>i(r)),S(e,s),le()}var ho=C('<div class="civ-missing-banner svelte-980jx" data-testid="civilization-missing-banner">Civilization layer missing for this run. Run pipeline: <code class="svelte-980jx">npm run atlas:run</code></div>'),go=C("<!> <!>",1),po=C('<div class="drilldown-overlay svelte-980jx" role="button" tabindex="-1"><div class="drilldown-modal svelte-980jx" role="dialog" tabindex="-1"><!></div></div>'),mo=C('<div class="drilldown-overlay svelte-980jx" role="button" tabindex="-1"><div class="drilldown-modal svelte-980jx" role="dialog" tabindex="-1"><!></div></div>'),bo=C('<div class="dashboard-view svelte-980jx"><!> <!> <div class="kpi-section svelte-980jx" data-testid="dashboard-first-screen"><!></div> <main class="dashboard-main svelte-980jx"><div class="radar-layout svelte-980jx"><div class="radar-sidebar svelte-980jx"><!> <!></div> <div class="radar-main svelte-980jx"><div class="dashboard-grid svelte-980jx"><!> <!> <!></div></div></div> <div class="secondary-tabs svelte-980jx"><button>Rendered (TG Preview)</button> <button>Evidence</button> <button>Raw items</button></div> <!></main> <!> <!></div>');function wo(e,t){ie(t,!0);let r=Y(t,"runMeta",3,null),n=Y(t,"debugMode",3,!1);Y(t,"debugInfo",19,()=>({}));let s=G(null),a=G(null),o=G(null),u=G(null),l=G(null),v=G(We([])),c=G(null),d=G(null),k=G(null),p=G(null),b=G(null),x=G(null),h=G(We([])),w=G("rendered"),_=G(!1),y=G(null),E=G(!1),I=G(null),z=G(null);const A=50,O=4096,$=M(()=>{var K;const T=((K=i(a))==null?void 0:K.coverage)??[],L={ok:0,empty:0,rate_limited:0,error:0};for(const X of T){const j=(X.status??"").toLowerCase();j==="ok"?L.ok++:j==="empty"?L.empty++:j==="rate_limited"||j==="parse_error"?L.rate_limited++:L.error++}return L}),J=M(()=>{var T,L;return((L=(T=i(s))==null?void 0:T.filter_report)==null?void 0:L.rejected_items_count)??0}),Z=M(()=>i(b)!=null&&i(x)!=null),re=M(()=>{var T;return((T=i(x))==null?void 0:T.counts_by_radar_category)??{}}),F=M(()=>!i(z)||!i(h).length?i(h):i(h).filter(T=>{var L,K;return((K=(L=T.radar_categories)==null?void 0:L[0])==null?void 0:K.id)===i(z)})),N=M(()=>{var K;if(!((K=i(x))!=null&&K.counts_by_tag))return{tag:"‚Äî",count:0};const T=Object.entries(i(x).counts_by_tag);if(T.length===0)return{tag:"‚Äî",count:0};const L=T.sort((X,j)=>j[1]-X[1]);return{tag:L[0][0],count:L[0][1]}}),U=M(()=>{var K,X;const T={},L=((K=i(a))==null?void 0:K.coverage)??[];for(const j of L){const _e=j.source_id,Lt=(X=i(v).find(lt=>(lt.source_name??"").toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")===_e))==null?void 0:X.source_name;T[_e]=Lt??_e}return T}),ee=M(()=>i(d)!=null?i(d).chain_valid?"Valid":"Invalid":i(k)!=null||i(p)!=null?"Evidence":"Not configured");async function ne(){if(!t.runId)return;const T=`/api/atlas/${t.runId}`;P(l,null);try{const L=`${T}/rendered_text.txt`,K=`${T}/render_meta.json`;let X,j;if(n()&&t.onDebugUpdate){const[Je,jt]=await Promise.all([Da(K,{as:"json"}),Un(L)]);X=(Je==null?void 0:Je.data)??null,j=jt,Je&&t.onDebugUpdate("render_meta",{url:Je.url,status:Je.status,contentType:Je.contentType,bodyPreview:Je.bodyPreview}),jt&&t.onDebugUpdate("rendered_text",{url:jt.url,status:jt.status,contentType:jt.contentType,bodyPreview:jt.bodyPreview})}else[X,j]=await Promise.all([Ze(K),Un(L)]);P(s,X,!0),j?(j.contentType||"").toLowerCase().includes("application/json")||j.text.length>0&&j.text.trimStart()[0]==="{"?(P(l,{url:L,preview:j.text.slice(0,80)},!0),P(u,"")):P(u,j.text,!0):P(u,"");const _e=performance.now(),[Lt,lt,Qt,ht,$a,es,ts,rs,ns,zr]=await Promise.all([Ze(`${T}/atlas-fetch/provenance.json`),Ze(`${T}/acceptance_report.json`),Ze(`${T}/atlas-fetch/items_normalized.json`),Ze(`${T}/audit/summary.json`),Ze(`${T}/tg/provenance.json`),qn(`${T}/tg/sent_text.txt`),qn(`${T}/tg/readback_text.txt`),Ze(`${T}/civilization/highlights.json`),Ze(`${T}/civilization/aggregates.json`),Ze(`${T}/civilization/items_civ.json`)]);P(a,Lt,!0),P(o,lt,!0),P(v,(Qt==null?void 0:Qt.items)??[],!0),P(c,ht,!0),P(d,$a,!0),P(k,es,!0),P(p,ts,!0),P(b,rs,!0),P(x,ns,!0),P(h,(zr==null?void 0:zr.items)??[],!0);const as=performance.now()-_e;typeof window<"u"&&console.log(`[atlas] initial load parse: ${as.toFixed(1)}ms`)}catch(L){console.error(L)}}Nt(()=>{t.runId,ne()});function be(T=null){P(y,T,!0),P(_,!0)}function Me(T=null){P(I,T,!0),P(E,!0)}var Xt=bo(),cn=f(Xt);{let T=M(()=>{var j;return(j=r())==null?void 0:j.mtime}),L=M(()=>{var j;return(j=r())==null?void 0:j.coverage_sources}),K=M(()=>{var j;return(j=r())==null?void 0:j.configured_sources}),X=M(()=>{var j;return(j=r())==null?void 0:j.verdict});rl(cn,{get runId(){return t.runId},get mtime(){return i(T)},get coverageSources(){return i(L)},get configuredSources(){return i(K)},get verdict(){return i(X)},get tgStatus(){return i(ee)},title:"Atlas Civilization Situation Monitor"})}var fn=m(cn,2);{var Fa=T=>{var L=ho();S(T,L)};q(fn,T=>{i(Z)||T(Fa)})}var dn=m(fn,2),Ba=f(dn);{let T=M(()=>{var X;return((X=i(s))==null?void 0:X.item_count)??0}),L=M(()=>{var X;return((X=i(u))==null?void 0:X.length)??0}),K=M(()=>{var X;return((X=i(x))==null?void 0:X.structural_count)??0});sl(Ba,{get itemCount(){return i(T)},get coverageStats(){return i($)},get aiRejectCount(){return i(J)},get tgLength(){return i(L)},get structuralCount(){return i(K)},get topCivTag(){return i(N).tag},get topCivCount(){return i(N).count},tgLimit:O})}var _n=m(dn,2),hn=f(_n),gn=f(hn),pn=f(gn);Hl(pn,{get selectedCategory(){return i(z)},get countsByRadar(){return i(re)},onSelect:T=>P(z,T,!0)});var qa=m(pn,2);gt(qa,{title:"Sources & KOL",children:(T,L)=>{Zl(T,{get selectedCategory(){return i(z)}})},$$slots:{default:!0}});var Ua=m(gn,2),Ga=f(Ua),mn=f(Ga);{var Ha=T=>{var L=go(),K=xe(L);{let j=M(()=>{var _e;return((_e=i(x))==null?void 0:_e.structural_count)??0});gt(K,{title:"Civilization",get count(){return i(j)},children:(_e,Lt)=>{{let lt=M(()=>{var ht;return((ht=i(x))==null?void 0:ht.structural_count_by_tag)??{}}),Qt=M(()=>{var ht;return((ht=i(x))==null?void 0:ht.structural_count)??0});El(_e,{get structuralCountByTag(){return i(lt)},get structuralCount(){return i(Qt)},onTagClick:Me})}},$$slots:{default:!0}})}var X=m(K,2);gt(X,{title:"Five-D Distribution",children:(j,_e)=>{{let Lt=M(()=>{var lt;return((lt=i(x))==null?void 0:lt.avg_score_by_tag)??{}});Il(j,{get avgScoreByTag(){return i(Lt)}})}},$$slots:{default:!0}}),S(T,L)};q(mn,T=>{i(Z)&&T(Ha)})}var bn=m(mn,2);{let T=M(()=>{var L,K;return((K=(L=i(a))==null?void 0:L.coverage)==null?void 0:K.length)??0});gt(bn,{title:"Source Health",get count(){return i(T)},children:(L,K)=>{{let X=M(()=>{var j;return((j=i(a))==null?void 0:j.coverage)??[]});vl(L,{get coverage(){return i(X)},onSourceClick:be,get sourceIdToName(){return i(U)}})}},$$slots:{default:!0}})}var Ka=m(bn,2);{let T=M(()=>i(z)?i(F).length:i(v).length);gt(Ka,{title:"Items by Source",get count(){return i(T)},children:(L,K)=>{{let X=M(()=>i(z)?i(F):i(v)),j=M(()=>{var _e;return((_e=i(a))==null?void 0:_e.coverage)??[]});_l(L,{get items(){return i(X)},get coverage(){return i(j)},onSourceClick:be})}},$$slots:{default:!0}})}var wn=m(hn,2),Pr=f(wn);let yn;var Ar=m(Pr,2);let kn;var xn=m(Ar,2);let Sn;var Va=m(wn,2);{var Wa=T=>{gt(T,{title:"Rendered",children:(L,K)=>{ro(L,{get renderedText(){return i(u)},get routingError(){return i(l)}})},$$slots:{default:!0}})},Ya=T=>{gt(T,{title:"Raw Items",get count(){return i(v).length},children:(L,K)=>{Gn(L,{get items(){return i(v)},initialSourceFilter:null,pageSize:A,onClose:()=>{},showClose:!1})},$$slots:{default:!0}})},Ja=T=>{_o(T,{get acceptanceReport(){return i(o)},get auditSummary(){return i(c)},get provenance(){return i(a)},get tgProvenance(){return i(d)},get tgSent(){return i(k)},get tgReadback(){return i(p)}})};q(Va,T=>{i(w)==="rendered"?T(Wa):i(w)==="raw"?T(Ya,1):T(Ja,!1)})}var En=m(_n,2);{var Za=T=>{var L=po(),K=f(L),X=f(K);Gn(X,{get items(){return i(v)},get initialSourceFilter(){return i(y)},pageSize:A,onClose:()=>P(_,!1)}),te("click",L,()=>P(_,!1)),te("keydown",L,j=>j.key==="Escape"&&P(_,!1)),te("click",K,j=>j.stopPropagation()),te("keydown",K,j=>j.stopPropagation()),S(T,L)};q(En,T=>{i(_)&&T(Za)})}var Xa=m(En,2);{var Qa=T=>{var L=mo(),K=f(L),X=f(K);{let j=M(()=>i(z)?i(F):i(h));Dl(X,{get items(){return i(j)},get initialTagFilter(){return i(I)},pageSize:A,onClose:()=>P(E,!1)})}te("click",L,()=>P(E,!1)),te("keydown",L,j=>j.key==="Escape"&&P(E,!1)),te("click",K,j=>j.stopPropagation()),te("keydown",K,j=>j.stopPropagation()),S(T,L)};q(Xa,T=>{i(E)&&T(Qa)})}D(()=>{yn=Be(Pr,1,"svelte-980jx",null,yn,{active:i(w)==="rendered"}),kn=Be(Ar,1,"svelte-980jx",null,kn,{active:i(w)==="evidence"}),Sn=Be(xn,1,"svelte-980jx",null,Sn,{active:i(w)==="raw"})}),te("click",Pr,()=>P(w,"rendered")),te("click",Ar,()=>P(w,"evidence")),te("click",xn,()=>P(w,"raw")),S(e,Xt),le()}it(["click","keydown"]);var yo=C('<dt class="svelte-stkjnw">selected run_id</dt> <dd class="svelte-stkjnw"><code class="svelte-stkjnw"> </code></dd>',1),ko=C('<dt class="svelte-stkjnw">runs</dt> <dd class="svelte-stkjnw"><span class="meta svelte-stkjnw"> </span> <br/><code class="svelte-stkjnw"> </code> <details class="body-preview svelte-stkjnw"><summary class="svelte-stkjnw">body (first 120)</summary><pre class="svelte-stkjnw"> </pre></details></dd>',1),xo=C('<dt class="svelte-stkjnw">render_meta</dt> <dd class="svelte-stkjnw"><span class="meta svelte-stkjnw"> </span> <br/><code class="svelte-stkjnw"> </code> <details class="body-preview svelte-stkjnw"><summary class="svelte-stkjnw">body (first 120)</summary><pre class="svelte-stkjnw"> </pre></details></dd>',1),So=C('<dt class="svelte-stkjnw">rendered_text</dt> <dd class="svelte-stkjnw"><span class="meta svelte-stkjnw"> </span> <br/><code class="svelte-stkjnw"> </code> <details class="body-preview svelte-stkjnw"><summary class="svelte-stkjnw">body (first 120)</summary><pre class="svelte-stkjnw"> </pre></details></dd>',1),Eo=C('<details class="debug-panel svelte-stkjnw"><summary class="svelte-stkjnw">Debug: API diagnostics</summary> <dl><!> <!> <!> <!></dl></details>');function Co(e,t){ie(t,!0);let r=Y(t,"debugInfo",19,()=>({}));var n=Jr(),s=xe(n);{var a=u=>{var l=Eo(),v=m(f(l),2),c=f(v);{var d=_=>{var y=yo(),E=m(xe(y),2),I=f(E),z=f(I);D(()=>R(z,r().runId)),S(_,y)};q(c,_=>{r().runId&&_(d)})}var k=m(c,2);{var p=_=>{var y=ko(),E=m(xe(y),2),I=f(E),z=f(I),A=m(I,3),O=f(A),$=m(A,2),J=m(f($)),Z=f(J);D(()=>{R(z,`${r().runs.status??""} ¬∑ ${r().runs.contentType??""}`),R(O,r().runs.url),R(Z,r().runs.bodyPreview)}),S(_,y)};q(k,_=>{r().runs&&_(p)})}var b=m(k,2);{var x=_=>{var y=xo(),E=m(xe(y),2),I=f(E),z=f(I),A=m(I,3),O=f(A),$=m(A,2),J=m(f($)),Z=f(J);D(()=>{R(z,`${r().render_meta.status??""} ¬∑ ${r().render_meta.contentType??""}`),R(O,r().render_meta.url),R(Z,r().render_meta.bodyPreview)}),S(_,y)};q(b,_=>{r().render_meta&&_(x)})}var h=m(b,2);{var w=_=>{var y=So(),E=m(xe(y),2),I=f(E),z=f(I),A=m(I,3),O=f(A),$=m(A,2),J=m(f($)),Z=f(J);D(()=>{R(z,`${r().rendered_text.status??""} ¬∑ ${r().rendered_text.contentType??""}`),R(O,r().rendered_text.url),R(Z,r().rendered_text.bodyPreview)}),S(_,y)};q(h,_=>{r().rendered_text&&_(w)})}S(u,l)},o=M(()=>Object.keys(r()).length>0);q(s,u=>{i(o)&&u(a)})}S(e,n),le()}var To=C('<p class="empty svelte-1n46o8q">Select a run from the sidebar</p>'),Ro=C('<div class="app svelte-1n46o8q"><aside class="sidebar svelte-1n46o8q"><h1 class="svelte-1n46o8q">Atlas Radar</h1> <!></aside> <main class="main svelte-1n46o8q"><!> <!></main></div>');function Io(e,t){ie(t,!0);let r=G(null),n=G(We([])),s=G(!1),a=G(We({}));const o=M(()=>i(n).find(_=>_.run_id===i(r))??null);Nt(()=>{typeof window<"u"&&P(s,new URLSearchParams(window.location.search).get("debug")==="1")});async function u(){var _;try{if(i(s)){const y=await Da("/api/atlas/",{as:"json"});y&&(P(a,{...i(a),runs:{url:y.url,status:y.status,contentType:y.contentType,bodyPreview:y.bodyPreview}},!0),P(n,((_=y.data)==null?void 0:_.runs)??[],!0))}else{const I=(await(await fetch("/api/atlas/")).json()).runs??[];P(n,I.filter(z=>!(z.run_id||"").startsWith("ui-smoke-")),!0)}i(n).length>0&&!i(r)&&P(r,i(n)[0].run_id,!0),i(s)&&i(r)&&P(a,{...i(a),runId:i(r)},!0)}catch{P(n,[],!0)}}Nt(()=>{u()});function l(_){P(r,_,!0),i(s)&&P(a,{...i(a),runId:_},!0)}var v=Ro(),c=f(v),d=m(f(c),2);Yi(d,{get runs(){return i(n)},get selectedRunId(){return i(r)},onSelect:l,onRefresh:u});var k=m(c,2),p=f(k);{var b=_=>{Co(_,{get debugInfo(){return i(a)}})};q(p,_=>{i(s)&&_(b)})}var x=m(p,2);{var h=_=>{wo(_,{get runId(){return i(r)},get runMeta(){return i(o)},get debugMode(){return i(s)},get debugInfo(){return i(a)},onDebugUpdate:(y,E)=>{P(a,{...i(a),[y]:E},!0)}})},w=_=>{var y=To();S(_,y)};q(x,_=>{i(r)?_(h):_(w,!1)})}S(e,v),le()}const Po=document.getElementById("app");Ti(Io,{target:Po});
